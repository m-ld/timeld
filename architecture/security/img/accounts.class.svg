<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="867px" preserveAspectRatio="none" style="width:840px;height:867px;background:#FFFFFF;" version="1.1" viewBox="0 0 840 867" width="840px" zoomAndPan="magnify"><defs><filter height="300%" id="f16g189un0j0f9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[1a43f3003f8c278f89cc52af821a1f32]
cluster Ably--><polygon fill="#FFFFFF" filter="url(#f16g189un0j0f9)" points="258,269,296,269,303,291.4883,607,291.4883,607,428,258,428,258,269" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="258" x2="303" y1="291.4883" y2="291.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32" x="262" y="284.5352">Ably</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="406" y="307.0234">«service»</text><!--MD5=[cd8aea8b05f456e5d12ddf6e2609affc]
class AblyKey--><rect codeLine="94" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="91.9531" id="AblyKey" style="stroke:#A80036;stroke-width:1.5;" width="113" x="477.5" y="320"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="511" y="336.6016">AblyKey</text><line style="stroke:#A80036;stroke-width:1.5;" x1="478.5" x2="589.5" y1="344.1328" y2="344.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="483.5" y="358.7676">keyid</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="483.5" y="371.7227">name</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="483.5" y="384.6777">secret</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="483.5" y="397.6328">capabilities : string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="478.5" x2="589.5" y1="403.9531" y2="403.9531"/><path d="M274,321.5 L274,349.8105 A0,0 0 0 0 274,349.8105 L351,349.8105 A0,0 0 0 0 351,349.8105 L351,339.6553 L481.5,367.5654 L351,331.6553 L351,331.5 L341,321.5 L274,321.5 A0,0 0 0 0 274,321.5 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M341,321.5 L341,331.5 L351,331.5 L341,321.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="280" y="339.0684">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="330" y="342.7012">u</text><path d="M274,359.8105 L274,400.4316 A0,0 0 0 0 274,400.4316 L442,400.4316 A0,0 0 0 0 442,400.4316 L442,384.1211 L481.5,393.4756 L442,376.1211 L442,369.8105 L432,359.8105 L274,359.8105 A0,0 0 0 0 274,359.8105 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M432,359.8105 L432,369.8105 L442,369.8105 L432,359.8105 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="280" y="377.3789">Defines channel access</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="280" y="392.6895">thus, timesheet access</text><!--MD5=[6de492f04047ff8a778df2bea690e363]
class Gateway--><rect codeLine="6" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="95.4863" id="Gateway" style="stroke:#A80036;stroke-width:1.5;" width="135" x="689.5" y="124"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="729.5" y="140.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="725.5" y="154.7344">«ably app»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="52" x="731" y="168.8672">«service»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="732.5" y="183">Gateway</text><line style="stroke:#A80036;stroke-width:1.5;" x1="690.5" x2="823.5" y1="190.5313" y2="190.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="695.5" y="205.166">appMasterKey «secret»</text><line style="stroke:#A80036;stroke-width:1.5;" x1="690.5" x2="823.5" y1="211.4863" y2="211.4863"/><!--MD5=[f9a29335b499db729be669fd1bd54958]
class Account--><rect codeLine="12" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="107.2637" id="Account" style="stroke:#A80036;stroke-width:1.5;" width="185" x="625.5" y="312.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="59" x="688.5" y="329.1016">«abstract»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="691" y="343.2344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="695.5" y="357.3672">Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="626.5" x2="809.5" y1="364.8984" y2="364.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="631.5" y="379.5332">vf:primaryAccountable : IRI [1..*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="631.5" y="392.4883">timesheet : IRI [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="631.5" y="405.4434">project : Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="626.5" x2="809.5" y1="411.7637" y2="411.7637"/><!--MD5=[0c2e12f724a2bba325ddf189ef351421]
class Timesheet--><rect codeLine="46" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="70.2207" id="Timesheet" style="stroke:#A80036;stroke-width:1.5;" width="112" x="520" y="783.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="548.5" y="800.1016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="546" y="814.2344">Timesheet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="521" x2="631" y1="821.7656" y2="821.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="526" y="836.4004">account</text><text fill="#000000" font-family="sans-serif" font-size="8" lengthAdjust="spacing" textLength="3" x="569" y="839.4551">t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="51" x="575" y="836.4004">: Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="521" x2="631" y1="845.7207" y2="845.7207"/><!--MD5=[79d378210367c0c6ec62ef762ddfbd1b]
class Project--><rect codeLine="54" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="80.1758" id="Project" style="stroke:#A80036;stroke-width:1.5;" width="144" x="504" y="573.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="549" y="590.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40" x="556" y="604.2344">Project</text><line style="stroke:#A80036;stroke-width:1.5;" x1="505" x2="647" y1="611.7656" y2="611.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="510" y="626.4004">vf:provider : IRI [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="510" y="639.3555">timesheet : Timesheet [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="505" x2="647" y1="645.6758" y2="645.6758"/><!--MD5=[873670755c6433d3512a8b316aa6820d]
class UserAccount--><rect codeLine="22" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="66.043" id="UserAccount" style="stroke:#A80036;stroke-width:1.5;" width="97" x="485.5" y="138.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="498.5" y="155.1016">UserAccount</text><line style="stroke:#A80036;stroke-width:1.5;" x1="486.5" x2="581.5" y1="162.6328" y2="162.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="491.5" y="177.2676">email : string [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="491.5" y="190.2227">keyid : string [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="486.5" x2="581.5" y1="196.543" y2="196.543"/><path d="M287.5,121 L287.5,161.6211 A0,0 0 0 0 287.5,161.6211 L450.5,161.6211 A0,0 0 0 0 450.5,161.6211 L450.5,145.3105 L489.5,173.1104 L450.5,137.3105 L450.5,131 L440.5,121 L287.5,121 A0,0 0 0 0 287.5,121 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M440.5,121 L440.5,131 L450.5,131 L440.5,121 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="293.5" y="138.5684">Registered email, used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="293.5" y="153.8789">for account activation</text><path d="M287.5,171.6211 L287.5,212.2422 A0,0 0 0 0 287.5,212.2422 L428.5,212.2422 A0,0 0 0 0 428.5,212.2422 L428.5,195.9316 L489.5,186.0654 L428.5,187.9316 L428.5,181.6211 L418.5,171.6211 L287.5,171.6211 A0,0 0 0 0 287.5,171.6211 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M418.5,171.6211 L418.5,181.6211 L428.5,181.6211 L418.5,171.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="293.5" y="189.1895">Matches</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="349.5" y="188.8657">ably.key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="293.5" y="204.5">Can be revoked</text><!--MD5=[f5f68a7b4d1daa3f868d0f655b773560]
class OrganisationAccount--><rect codeLine="36" fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="53.0879" id="OrganisationAccount" style="stroke:#A80036;stroke-width:1.5;" width="175" x="512.5" y="7"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="541.5" y="23.6016">OrganisationAccount</text><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="686.5" y1="31.1328" y2="31.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="163" x="518.5" y="45.7676">foaf:member : UserAccount [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="686.5" y1="52.0879" y2="52.0879"/><path d="M331,8 L331,48.6211 A0,0 0 0 0 331,48.6211 L477,48.6211 A0,0 0 0 0 477,48.6211 L477,32.3105 L516.5,41.6104 L477,24.3105 L477,18 L467,8 L331,8 A0,0 0 0 0 331,8 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M467,8 L467,18 L477,18 L467,8 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="337" y="25.5684">Only user accounts:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="337" y="40.8789">no org hierarchy</text><path d="M667,798 L667,814.5 L632.09,818.5 L667,822.5 L667,838.6211 A0,0 0 0 0 667,838.6211 L831,838.6211 A0,0 0 0 0 831,838.6211 L831,808 L821,798 L667,798 A0,0 0 0 0 667,798 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M821,798 L821,808 L831,808 L821,798 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="673" y="815.5684">not actually a subject</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="673" y="830.8789">in the Gateway domain</text><!--MD5=[df6a39b053164d23cc3ecae9c3484a54]
entity CLI--><rect fill="#FEFECE" filter="url(#f16g189un0j0f9)" height="123.4414" style="stroke:#A80036;stroke-width:1.5;" width="232" x="7" y="304.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="219" y="309.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="217" y="311.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="217" y="315.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="22" y="338.0352">CLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="26" y="354.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="238" y1="357.4766" y2="357.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="22" y="375.0117">ably.key «secret»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="22" y="391.5">account</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="76" y="395.1328">u</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="87" y="391.5">(aka principal.@id)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="22" y="410.9883">timesheets : domain [*]</text><path d="M28.5,136 L28.5,207.2422 A0,0 0 0 0 28.5,207.2422 L119,207.2422 L123,304.3 L127,207.2422 L217.5,207.2422 A0,0 0 0 0 217.5,207.2422 L217.5,146 L207.5,136 L28.5,136 A0,0 0 0 0 28.5,136 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M207.5,136 L207.5,146 L217.5,146 L207.5,136 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="34.5" y="153.5684">Installed on a device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="34.5" y="168.8789">under an OS account.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="34.5" y="184.1895">Registered to user account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="34.5" y="199.5">via ably.key.</text><!--MD5=[194d4a8dfc1f1dbb24ee205902653cbe]
reverse link Gateway to Account--><path codeLine="10" d="M744.92,232.1 C739.72,257.78 733.69,287.54 728.66,312.38 " fill="none" id="Gateway-backto-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="747.56,219.1,742.4522,224.1902,745.1863,230.8629,750.2941,225.7727,747.56,219.1" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="723.6893" y="301.7385">*</text><!--MD5=[f3ce057685e0ff9797995d99a96fc0ff]
link Account to Timesheet--><path codeLine="18" d="M719.9964,431.6 C719.9964,431.6 711.31,629.13 666,722.5 C656.81,741.45 642.47,759.13 627.92,773.98 " fill="none" id="Account-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="618.38,783.31,627.6076,779.8675,621.9511,779.8104,622.0082,774.1538,618.38,783.31" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="621.9511" x2="627.675" y1="779.8104" y2="774.22"/><polygon fill="#A80036" points="719.97,419.6,715.9832,425.6088,719.9964,431.6,723.9832,425.5912,719.97,419.6" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="718" y="618.5684">owns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="619.8868" y="772.7491">*</text><!--MD5=[a1a4cfa532728efa24278c706b9245e3]
link Account to Project--><path codeLine="20" d="M674.2562,429.9729 C674.2562,429.9729 662.18,448.8 657,457.5 C636.76,491.47 616.16,530.98 600.79,561.61 " fill="none" id="Account-Project" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="594.96,573.31,602.5534,567.0378,597.1895,568.8346,595.3927,563.4707,594.96,573.31" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="597.1895" x2="600.765" y1="568.8346" y2="561.67"/><polygon fill="#A80036" points="680.87,419.96,674.2255,422.7619,674.2562,429.9729,680.9007,427.171,680.87,419.96" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="658" y="471.0684">owns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="591.7031" y="562.6932">*</text><!--MD5=[59bfd3b9fcea3a5880a303d33fa5646b]
link UserAccount$$$LEFT to UserAccount--><!--MD5=[008ba0f0b6901373239fc7803ec7bfb5]
link UserAccount to Account--><path codeLine="34" d="M564.25,204.69 C578.15,219.45 594.87,237.15 610,253 C623.92,267.58 638.9,283.18 653.14,297.97 " fill="none" id="UserAccount-to-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="658.22,293.15,667.06,312.41,648.14,302.87,658.22,293.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f895a74b40bf5cac559ca4dae092dc82]
link OrganisationAccount$$$LEFT to OrganisationAccount--><!--MD5=[3bd2f785ce7fba86ff840f78f2677824]
link OrganisationAccount to Account--><path codeLine="43" d="M609.16,60.16 C626.82,109.62 666.14,219.74 692.36,293.18 " fill="none" id="OrganisationAccount-to-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="699.08,291.19,699.21,312.38,685.9,295.9,699.08,291.19" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3e3ddf26659482ebc6db1edb96e472ec]
reverse link OrganisationAccount to UserAccount--><path codeLine="44" d="M581.8,72.01 C571.7,92.81 559.27,118.42 549.62,138.31 " fill="none" id="OrganisationAccount-backto-UserAccount" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="587.59,60.08,581.3717,63.7314,582.3505,70.8757,588.5688,67.2244,587.59,60.08" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="528.5729" y="127.5136">1..*</text><!--MD5=[c52c4d9618aad4a60bea30b2d0498325]
link Project to Timesheet--><path codeLine="59" d="M576,653.64 C576,691.2 576,747.36 576,783.21 " fill="none" id="Project-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="569.5031" y="674.1099">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="569.4281" y="772.6301">*</text><!--MD5=[3171026a460a65b82e10f3eaa254fce8]
link UserAccount to CLI--><path codeLine="76" d="M497.48,204.5 C488.35,211.16 478.23,217.51 468,222 C381.07,260.15 344.68,222.29 258,261 C233.55,271.92 209.52,288.11 188.66,304.49 " fill="none" id="UserAccount-CLI" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="190.2967" y="293.6398">*</text><!--MD5=[7eae40f39ba8424a7eed7bbcb9b34095]
link CLI to Timesheet--><path codeLine="78" d="M127.83,427.63 C137.38,506.6 165.66,643.85 249,722.5 C322.06,791.45 442.2,810.72 514.73,815.89 " fill="none" id="CLI-to-Timesheet" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="519.87,816.23,511.1656,811.622,514.8818,815.887,510.6168,819.6031,519.87,816.23" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="257.5" y="518.0684">entailed write access to timesheets</text><path d="M254,526.8105 L254,713.8105 L478,713.8105 L478,536.8105 L468,526.8105 L254,526.8105 " fill="#FBFB77" filter="url(#f16g189un0j0f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M468,526.8105 L468,536.8105 L478,536.8105 L468,526.8105 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="260" y="544.3789">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="310" y="548.0117">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="320" y="544.3789">= account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="4" x="384" y="548.0117">t</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="260" y="562.6895">∨</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="260" y="578">∃project:Project ⦁</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="268" y="593.3105">timesheet ∈ project.timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="268" y="608.6211">∧ (</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="276" y="623.9316">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="326" y="627.5645">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="336" y="623.9316">∈ project.vf:provider</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="276" y="642.2422">∨</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="276" y="657.5527">∃org:OrganisationAccount ⦁</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="284" y="672.8633">org ∈ project.vf:provider ∧</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="284" y="688.1738">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="334" y="691.8066">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="344" y="688.1738">∈ org.foaf:member</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="268" y="706.4844">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="505.9244" y="812.4916">*</text><!--MD5=[aaa4b569874f2939ef51bf111c950107]
link AblyKey$$$LEFT to AblyKey--><!--MD5=[601a963235cfb799dd4c132aab4bc84f]
link UserAccount to AblyKey--><path codeLine="108" d="M534,204.72 C534,236.19 534,284.37 534,319.69 " fill="none" id="UserAccount-AblyKey" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="525.2375" y="225.0761">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="527.5594" y="309.3813">*</text><!--MD5=[7f0e94456d2a83accc5f4d3e701edce9]
@startuml
'https://plantuml.com/class-diagram

hide circle
allowmixing

class Gateway <<domain>> <<ably app>> <<service>> {
  appMasterKey <<secret>>
}

Gateway *- - "*" Account

class Account <<abstract>> <<subject>> {
  vf:primaryAccountable : IRI [1..*]
  timesheet : IRI [*]
  project : Project [*]
}

Account *- -> "*" Timesheet: owns

Account *- -> "*" Project: owns

class UserAccount {
  email : string [*]
  keyid : string [*]
}
note left of UserAccount::email
  Registered email, used
  for account activation
end note
note left of UserAccount::keyid
  Matches ""ably.key""
  Can be revoked
end note
UserAccount - -|> Account

class OrganisationAccount {
  foaf:member : UserAccount [*]
}
note left of OrganisationAccount::foaf:member
  Only user accounts:
  no org hierarchy
end note
OrganisationAccount - -|> Account
OrganisationAccount o- - "1..*" UserAccount

class Timesheet <<domain>> {
  account<sub>t</sub> : Account
}
note right of Timesheet
  not actually a subject
  in the Gateway domain
end note

class Project <<subject>> {
  vf:provider : IRI [*]
  timesheet : Timesheet [*]
}

Project "*" - - "*" Timesheet

component CLI [
  CLI

  - - -
  ably.key <<secret>>
  account<sub>u</sub> (aka principal.@id)
  timesheets : domain [*]
]
note top of CLI
  Installed on a device
  under an OS account.
  Registered to user account
  via ably.key.
end note

UserAccount .. "*" CLI

CLI ..> "*" Timesheet: entailed write access to timesheets
note bottom on link
  account<sub>u</sub> = account<sub>t</sub>
  ∨
  ∃project:Project ⦁
    timesheet ∈ project.timesheet
    ∧ (
      account<sub>u</sub> ∈ project.vf:provider
      ∨
      ∃org:OrganisationAccount ⦁
        org ∈ project.vf:provider ∧
        account<sub>u</sub> ∈ org.foaf:member
    )
end note

package Ably <<service>> {
  class AblyKey {
    keyid
    name
    secret
    capabilities : string
  }
  note left of AblyKey::name
    account<sub>u</sub>
  end note
  note left of AblyKey::capabilities
    Defines channel access
    thus, timesheet access
  end note

  UserAccount "1" - - "*" AblyKey
}

@enduml

@startuml

hide circle
allowmixing

class Gateway <<domain>> <<ably app>> <<service>> {
  appMasterKey <<secret>>
}

Gateway *- - "*" Account

class Account <<abstract>> <<subject>> {
  vf:primaryAccountable : IRI [1..*]
  timesheet : IRI [*]
  project : Project [*]
}

Account *- -> "*" Timesheet: owns

Account *- -> "*" Project: owns

class UserAccount {
  email : string [*]
  keyid : string [*]
}
note left of UserAccount::email
  Registered email, used
  for account activation
end note
note left of UserAccount::keyid
  Matches ""ably.key""
  Can be revoked
end note
UserAccount - -|> Account

class OrganisationAccount {
  foaf:member : UserAccount [*]
}
note left of OrganisationAccount::foaf:member
  Only user accounts:
  no org hierarchy
end note
OrganisationAccount - -|> Account
OrganisationAccount o- - "1..*" UserAccount

class Timesheet <<domain>> {
  account<sub>t</sub> : Account
}
note right of Timesheet
  not actually a subject
  in the Gateway domain
end note

class Project <<subject>> {
  vf:provider : IRI [*]
  timesheet : Timesheet [*]
}

Project "*" - - "*" Timesheet

component CLI [
  CLI

  - - -
  ably.key <<secret>>
  account<sub>u</sub> (aka principal.@id)
  timesheets : domain [*]
]
note top of CLI
  Installed on a device
  under an OS account.
  Registered to user account
  via ably.key.
end note

UserAccount .. "*" CLI

CLI ..> "*" Timesheet: entailed write access to timesheets
note bottom on link
  account<sub>u</sub> = account<sub>t</sub>
  ∨
  ∃project:Project ⦁
    timesheet ∈ project.timesheet
    ∧ (
      account<sub>u</sub> ∈ project.vf:provider
      ∨
      ∃org:OrganisationAccount ⦁
        org ∈ project.vf:provider ∧
        account<sub>u</sub> ∈ org.foaf:member
    )
end note

package Ably <<service>> {
  class AblyKey {
    keyid
    name
    secret
    capabilities : string
  }
  note left of AblyKey::name
    account<sub>u</sub>
  end note
  note left of AblyKey::capabilities
    Defines channel access
    thus, timesheet access
  end note

  UserAccount "1" - - "*" AblyKey
}

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
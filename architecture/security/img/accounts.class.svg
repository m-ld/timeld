<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="960px" preserveAspectRatio="none" style="width:1262px;height:960px;background:#FFFFFF;" version="1.1" viewBox="0 0 1262 960" width="1262px" zoomAndPan="magnify"><defs><filter height="300%" id="fwoeybgzynbkd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6de492f04047ff8a778df2bea690e363]
class Gateway--><rect codeLine="6" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="81.3535" id="Gateway" style="stroke:#A80036;stroke-width:1.5;" width="135" x="330" y="118"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="370" y="134.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="52" x="371.5" y="148.7344">«service»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="373" y="162.8672">Gateway</text><line style="stroke:#A80036;stroke-width:1.5;" x1="331" x2="464" y1="170.3984" y2="170.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="336" y="185.0332">appMasterKey «secret»</text><line style="stroke:#A80036;stroke-width:1.5;" x1="331" x2="464" y1="191.3535" y2="191.3535"/><!--MD5=[f9a29335b499db729be669fd1bd54958]
class Account--><rect codeLine="12" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="107.2637" id="Account" style="stroke:#A80036;stroke-width:1.5;" width="242" x="276.5" y="307.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="59" x="368" y="324.1016">«abstract»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="370.5" y="338.2344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="375" y="352.3672">Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="277.5" x2="517.5" y1="359.8984" y2="359.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="230" x="282.5" y="374.5332">vf:primaryAccountable : UserAccount [1..*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="282.5" y="387.4883">timesheet : Timesheet [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="282.5" y="400.4434">project : Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="277.5" x2="517.5" y1="406.7637" y2="406.7637"/><path d="M6,270 L6,341.2422 A0,0 0 0 0 6,341.2422 L241,341.2422 A0,0 0 0 0 241,341.2422 L241,309.6211 L280.5,370.376 L241,301.6211 L241,280 L231,270 L6,270 A0,0 0 0 0 6,270 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M231,270 L231,280 L241,280 L231,270 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="12" y="287.5684">The account "admin".</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="12" y="302.8789">For user accounts, a</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="20" y="318.1895">redundant self-reference</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="20" y="333.5">(user admins their own account).</text><path d="M6,351.2422 L6,391.8633 A0,0 0 0 0 6,391.8633 L225,391.8633 A0,0 0 0 0 225,391.8633 L225,375.5527 L280.5,383.3311 L225,367.5527 L225,361.2422 L215,351.2422 L6,351.2422 A0,0 0 0 0 6,351.2422 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M215,351.2422 L215,361.2422 L225,361.2422 L215,351.2422 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="12" y="368.8105">inverse injection: a Timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="12" y="384.1211">can only appear in one Account</text><path d="M6,401.8633 L6,442.4844 A0,0 0 0 0 6,442.4844 L225,442.4844 A0,0 0 0 0 225,442.4844 L225,426.1738 L280.5,396.2861 L225,418.1738 L225,411.8633 L215,401.8633 L6,401.8633 A0,0 0 0 0 6,401.8633 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M215,401.8633 L215,411.8633 L225,411.8633 L215,401.8633 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="12" y="419.4316">inverse injection: a Project</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="12" y="434.7422">can only appear in one Account</text><!--MD5=[0c2e12f724a2bba325ddf189ef351421]
class Timesheet--><rect codeLine="55" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="97.3086" id="Timesheet" style="stroke:#A80036;stroke-width:1.5;" width="114" x="790.5" y="849"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="820" y="865.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="820.5" y="879.7344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="817.5" y="893.8672">Timesheet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="791.5" x2="903.5" y1="901.3984" y2="901.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="43" x="796.5" y="916.0332">account</text><text fill="#000000" font-family="sans-serif" font-size="8" font-style="italic" lengthAdjust="spacing" textLength="5" x="839.5" y="919.0879">p</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="51" x="847.5" y="916.0332">: Account</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="796.5" y="931.9883">project : Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="791.5" x2="903.5" y1="938.3086" y2="938.3086"/><!--MD5=[79d378210367c0c6ec62ef762ddfbd1b]
class Project--><rect codeLine="74" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="54.2656" id="Project" style="stroke:#A80036;stroke-width:1.5;" width="56" x="353.5" y="622.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="354.5" y="639.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40" x="361.5" y="653.2344">Project</text><line style="stroke:#A80036;stroke-width:1.5;" x1="354.5" x2="408.5" y1="660.7656" y2="660.7656"/><line style="stroke:#A80036;stroke-width:1.5;" x1="354.5" x2="408.5" y1="668.7656" y2="668.7656"/><!--MD5=[873670755c6433d3512a8b316aa6820d]
class UserAccount--><rect codeLine="36" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="66.043" id="UserAccount" style="stroke:#A80036;stroke-width:1.5;" width="110" x="698.5" y="125.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="718" y="142.1016">UserAccount</text><line style="stroke:#A80036;stroke-width:1.5;" x1="699.5" x2="807.5" y1="149.6328" y2="149.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98" x="704.5" y="164.2676">email : string [1..*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="704.5" y="177.2227">keyid : string [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="699.5" x2="807.5" y1="183.543" y2="183.543"/><path d="M500,108 L500,148.6211 A0,0 0 0 0 500,148.6211 L663,148.6211 A0,0 0 0 0 663,148.6211 L663,132.3105 L702.5,160.1104 L663,124.3105 L663,118 L653,108 L500,108 A0,0 0 0 0 500,108 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M653,108 L653,118 L663,118 L653,108 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="506" y="125.5684">Registered email, used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="506" y="140.8789">for account activation</text><path d="M500,158.6211 L500,199.2422 A0,0 0 0 0 500,199.2422 L641,199.2422 A0,0 0 0 0 641,199.2422 L641,182.9316 L702.5,173.0654 L641,174.9316 L641,168.6211 L631,158.6211 L500,158.6211 A0,0 0 0 0 500,158.6211 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M631,158.6211 L631,168.6211 L641,168.6211 L631,158.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="506" y="176.1895">Matches</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="562" y="175.8657">auth.key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="506" y="191.5">Can be revoked</text><!--MD5=[f5f68a7b4d1daa3f868d0f655b773560]
class OrganisationAccount--><rect codeLine="50" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="40.1328" id="OrganisationAccount" style="stroke:#A80036;stroke-width:1.5;" width="123" x="235" y="7"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="238" y="23.6016">OrganisationAccount</text><line style="stroke:#A80036;stroke-width:1.5;" x1="236" x2="357" y1="31.1328" y2="31.1328"/><line style="stroke:#A80036;stroke-width:1.5;" x1="236" x2="357" y1="39.1328" y2="39.1328"/><path d="M583.5,862 L583.5,933.2422 A0,0 0 0 0 583.5,933.2422 L755.5,933.2422 A0,0 0 0 0 755.5,933.2422 L755.5,901.5 L790.5,897.5 L755.5,893.5 L755.5,872 L745.5,862 L583.5,862 A0,0 0 0 0 583.5,862 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M745.5,862 L745.5,872 L755.5,872 L745.5,862 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="589.5" y="879.5684">a subject in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="589.5" y="894.8789">Gateway domain;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="589.5" y="910.1895">also a domain shared to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="589.5" y="925.5">authorised CLI clients</text><path d="M940,847 L940,863.3105 L898.5,913.376 L940,871.3105 L940,887.6211 A0,0 0 0 0 940,887.6211 L1079,887.6211 A0,0 0 0 0 1079,887.6211 L1079,857 L1069,847 L940,847 A0,0 0 0 0 940,847 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1069,847 L1069,857 L1079,857 L1069,847 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="946" y="864.5684">entailed from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="946" y="879.8789">Account.timesheet</text><path d="M940,897.6211 L940,913.9316 L896.5,927.8311 L940,921.9316 L940,938.2422 A0,0 0 0 0 940,938.2422 L1077,938.2422 A0,0 0 0 0 1077,938.2422 L1077,907.6211 L1067,897.6211 L940,897.6211 A0,0 0 0 0 940,897.6211 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1067,897.6211 L1067,907.6211 L1077,907.6211 L1067,897.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="946" y="915.1895">Can only be set by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="946" y="930.5">account admin</text><path d="M444.5,513 L444.5,645.5 L409.86,649.5 L444.5,653.5 L444.5,785.9688 A0,0 0 0 0 444.5,785.9688 L794.5,785.9688 A0,0 0 0 0 794.5,785.9688 L794.5,523 L784.5,513 L444.5,513 A0,0 0 0 0 444.5,513 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M784.5,513 L784.5,523 L794.5,523 L784.5,513 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="450.5" y="530.5684">entailed</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="31" x="509.5" y="530.5684">read</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="544.5" y="530.5684">access to a timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="450.5" y="545.8789">(via Gateway export/publish)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="454.5" y="561.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="450.5" y="576.5">the user account must be the timesheet provider</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="13" x="450.5" y="591.8105">or</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="467.5" y="591.8105">the client of a project that contains the timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="454.5" y="607.1211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="450.5" y="622.4316">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="500.5" y="626.0645">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="510.5" y="622.4316">∈</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="458.5" y="640.7422">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="508.5" y="644.375">p</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="514.5" y="640.7422">.vf:primaryAccountable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="450.5" y="659.0527">∨</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="450.5" y="674.3633">∃account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="5" x="507.5" y="677.9961">c</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="512.5" y="674.3633">:Account ⦁</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="458.5" y="692.6738">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="508.5" y="696.3066">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="518.5" y="692.6738">∈</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="466.5" y="710.9844">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="5" x="516.5" y="714.6172">c</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="521.5" y="710.9844">.vf:primaryAccountable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="458.5" y="729.2949">∧</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="458.5" y="744.6055">∃project:Project ⦁</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="466.5" y="759.916">project ∈ account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="5" x="575.5" y="763.5488">c</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="580.5" y="759.916">.project ∧</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="466.5" y="778.2266">project ∈ timesheet.project</text><!--MD5=[df6a39b053164d23cc3ecae9c3484a54]
entity CLI--><rect fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="123.4414" style="stroke:#A80036;stroke-width:1.5;" width="199" x="836" y="299.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1015" y="304.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1013" y="306.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1013" y="310.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="851" y="333.0352">CLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="855" y="349.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="837" x2="1034" y1="352.4766" y2="352.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="851" y="370.0117">auth.key «secret»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="851" y="386.5">account</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="905" y="390.1328">u</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="916" y="386.5">(aka user)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="851" y="405.9883">timesheets : domain [*]</text><path d="M844,123 L844,194.2422 A0,0 0 0 0 844,194.2422 L933.98,194.2422 L936.41,299.15 L941.98,194.2422 L1033,194.2422 A0,0 0 0 0 1033,194.2422 L1033,133 L1023,123 L844,123 A0,0 0 0 0 844,123 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1023,123 L1023,133 L1033,133 L1023,123 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="850" y="140.5684">Installed on a device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="850" y="155.8789">under an OS account.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="850" y="171.1895">Registered to user account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="850" y="186.5">via auth.key.</text><!--MD5=[2086e18d236f9616263f91fe5276f8cf]
class Key--><rect codeLine="125" fill="#FEFECE" filter="url(#fwoeybgzynbkd)" height="93.1309" id="Key" style="stroke:#A80036;stroke-width:1.5;" width="86" x="710.5" y="314.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="726.5" y="331.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="743" y="345.2344">Key</text><line style="stroke:#A80036;stroke-width:1.5;" x1="711.5" x2="795.5" y1="352.7656" y2="352.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="69" x="716.5" y="367.4004">keyid : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="716.5" y="380.3555">name : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="716.5" y="393.3105">secret : string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="711.5" x2="795.5" y1="399.6309" y2="399.6309"/><path d="M598,342 L598,370.3105 A0,0 0 0 0 598,370.3105 L675,370.3105 A0,0 0 0 0 675,370.3105 L675,360.1553 L714.5,376.1982 L675,352.1553 L675,352 L665,342 L598,342 A0,0 0 0 0 598,342 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M665,342 L665,352 L675,352 L665,342 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="604" y="359.5684">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="654" y="363.2012">u</text><!--MD5=[194d4a8dfc1f1dbb24ee205902653cbe]
reverse link Gateway to Account--><path codeLine="10" d="M397.5,212.43 C397.5,241.69 397.5,277.93 397.5,307.18 " fill="none" id="Gateway-backto-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="397.5,199.11,393.5,205.11,397.5,211.11,401.5,205.11,397.5,199.11" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="391.1156" y="296.8947">*</text><!--MD5=[f505804a0bb9275518c7372a2126ee0f]
link Account$$$LEFT to Account--><!--MD5=[f3ce057685e0ff9797995d99a96fc0ff]
link Account to Timesheet--><path codeLine="32" d="M505.9405,419.7602 C505.9405,419.7602 556.24,442.95 580.5,452 C680.39,489.27 743.62,431.62 812.5,513 C852.52,560.29 852.94,740.11 850.12,835.78 " fill="none" id="Account-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="849.7,848.98,853.9849,840.1121,849.8594,843.9825,845.989,839.857,849.7,848.98" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="849.8594" x2="850.115" y1="843.9825" y2="835.985"/><polygon fill="#A80036" points="495.15,414.51,498.7952,420.7319,505.9405,419.7602,502.2953,413.5382,495.15,414.51" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="452.778" y="435.2797">provider</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="843.5825" y="838.3206">*</text><!--MD5=[a1a4cfa532728efa24278c706b9245e3]
link Account to Project--><path codeLine="34" d="M393.8971,426.5311 C393.8971,426.5311 386.3,562.63 383.69,609.35 " fill="none" id="Account-Project" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="382.95,622.48,387.4484,613.7185,383.2304,617.4879,379.461,613.2698,382.95,622.48" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="383.2304" x2="383.68" y1="617.4879" y2="609.495"/><polygon fill="#A80036" points="394.57,414.55,390.2398,420.3162,393.8971,426.5311,398.2272,420.7649,394.57,414.55" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="356.8247" y="435.3251">client</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="376.5722" y="611.6396">*</text><!--MD5=[59bfd3b9fcea3a5880a303d33fa5646b]
link UserAccount$$$LEFT to UserAccount--><!--MD5=[008ba0f0b6901373239fc7803ec7bfb5]
link UserAccount to Account--><path codeLine="48" d="M707.64,191.67 C698.74,197.61 689.41,203.62 680.5,209 C629.01,240.08 570.59,271.81 520.26,298.11 " fill="none" id="UserAccount-to-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="523.44,304.35,502.47,307.36,516.98,291.92,523.44,304.35" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3bd2f785ce7fba86ff840f78f2677824]
link OrganisationAccount to Account--><path codeLine="52" d="M295.59,47 C294.54,80.53 294.86,152.05 312.5,209 C321.17,236.98 335.54,265.52 350.02,290.14 " fill="none" id="OrganisationAccount-to-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="356.06,286.6,360.5,307.32,344.11,293.9,356.06,286.6" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3e3ddf26659482ebc6db1edb96e472ec]
reverse link OrganisationAccount to UserAccount--><path codeLine="53" d="M371.49,34.89 C450.83,44.16 578.4,64.76 680.5,108 C691.36,112.6 702.29,118.91 712.26,125.49 " fill="none" id="OrganisationAccount-backto-UserAccount" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="358.22,33.4,363.7337,38.0475,370.1443,34.7454,364.6306,30.0979,358.22,33.4" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="679.4855" y="114.7308">1..*</text><!--MD5=[f59287a37ea7426887cc54bb6a33788a]
link Timesheet to Timesheet$$$RIGHT--><!--MD5=[c52c4d9618aad4a60bea30b2d0498325]
link Project to Timesheet--><path codeLine="95" d="M382.71,676.52 C385.62,707.47 395.35,758.42 427.5,786 C546.02,887.67 628.61,788.79 773.5,847 C779.09,849.25 784.7,851.96 790.19,854.94 " fill="none" id="Project-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="376.2737" y="697.5081">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="776.4628" y="846.0945">*</text><!--MD5=[3171026a460a65b82e10f3eaa254fce8]
link UserAccount to CLI--><path codeLine="112" d="M782.74,191.71 C808.97,220.61 848.15,263.77 880.27,299.15 " fill="none" id="UserAccount-CLI" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="867.5372" y="288.6922">*</text><!--MD5=[7eae40f39ba8424a7eed7bbcb9b34095]
link CLI to Timesheet--><path codeLine="114" d="M930.75,422.61 C923.08,510.41 905.49,677.72 873.5,817 C871.47,825.84 868.88,835.09 866.13,844.04 " fill="none" id="CLI-to-Timesheet" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="864.59,848.97,871.105,841.5839,866.0895,844.2001,863.4732,839.1847,864.59,848.97" style="stroke:#A80036;stroke-width:1.0;"/><path d="M926.5,586 L926.5,709 L1253.5,709 L1253.5,596 L1243.5,586 L926.5,586 " fill="#FBFB77" filter="url(#fwoeybgzynbkd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1243.5,586 L1243.5,596 L1253.5,596 L1243.5,586 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="932.5" y="603.5684">entailed</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="99" x="991.5" y="603.5684">read and write</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="44" x="1094.5" y="603.5684">access</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="932.5" y="618.8789">(via the CLI)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="936.5" y="634.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="932.5" y="649.5">the user account must be the timesheet provider</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="936.5" y="664.8105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="932.5" y="680.1211">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="982.5" y="683.7539">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="992.5" y="680.1211">∈</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="940.5" y="698.4316">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="990.5" y="702.0645">p</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="996.5" y="698.4316">.vf:primaryAccountable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="860.6595" y="838.3091">*</text><!--MD5=[74bff2320e58d73ba6fff241c38665db]
link Key$$$LEFT to Key--><!--MD5=[c2d6dcccb71adf5adb3791b242960bc6]
link UserAccount to Key--><path codeLine="134" d="M753.5,191.71 C753.5,224.92 753.5,276.99 753.5,314.42 " fill="none" id="UserAccount-Key" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="744.7375" y="212.0642">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="747.0406" y="303.7211">*</text><!--MD5=[63cd94d4c24789d6a3de178daec491e6]
@startuml
'https://plantuml.com/class-diagram

hide circle
allowmixing

class Gateway <<domain>> <<service>> {
  appMasterKey <<secret>>
}

Gateway *- - "*" Account

class Account <<abstract>> <<subject>> {
  vf:primaryAccountable : UserAccount [1..*]
  timesheet : Timesheet [*]
  project : Project [*]
}
note left of Account::vf:primaryAccountable
  The account "admin".
  For user accounts, a
    redundant self-reference
    (user admins their own account).
end note
note left of Account::timesheet
  inverse injection: a Timesheet
  can only appear in one Account
end note
note left of Account::project
  inverse injection: a Project
  can only appear in one Account
end note

Account "provider" *- -> "*" Timesheet

Account "client" *- -> "*" Project

class UserAccount {
  email : string [1..*]
  keyid : string [*]
}
note left of UserAccount::email
  Registered email, used
  for account activation
end note
note left of UserAccount::keyid
  Matches ""auth.key""
  Can be revoked
end note
UserAccount - -|> Account

class OrganisationAccount {
}
OrganisationAccount - -|> Account
OrganisationAccount o- - "1..*" UserAccount

class Timesheet <<domain>> <<subject>> {
  //account<sub>p</sub> : Account//
  project : Project [*]
}
note left of Timesheet
  a subject in the
  Gateway domain;
  also a domain shared to
  authorised CLI clients
end note
note right of Timesheet::account
  entailed from
  Account.timesheet
end note
note right of Timesheet::project
  Can only be set by
  account admin
end note

class Project <<subject>> {
}
note right of Project
  **entailed __read__ access to a timesheet**
  (via Gateway export/publish)

  the user account must be the timesheet provider
  //or// the client of a project that contains the timesheet

  account<sub>u</sub> ∈
    account<sub>p</sub>.vf:primaryAccountable
  ∨
  ∃account<sub>c</sub>:Account ⦁
    account<sub>u</sub> ∈
      account<sub>c</sub>.vf:primaryAccountable
    ∧
    ∃project:Project ⦁
      project ∈ account<sub>c</sub>.project ∧
      project ∈ timesheet.project
end note

Project "*" - - "*" Timesheet

component CLI [
  CLI

  - - -
  auth.key <<secret>>
  account<sub>u</sub> (aka user)
  timesheets : domain [*]
]
note top of CLI
  Installed on a device
  under an OS account.
  Registered to user account
  via auth.key.
end note

UserAccount .. "*" CLI

CLI ..> "*" Timesheet
note bottom on link
  **entailed __read and write__ access**
  (via the CLI)

  the user account must be the timesheet provider

  account<sub>u</sub> ∈
    account<sub>p</sub>.vf:primaryAccountable
end note

class Key <<subject>> {
  keyid : string
  name : string
  secret : string
}
note left of Key::name
  account<sub>u</sub>
end note

UserAccount "1" - - "*" Key

@enduml

@startuml

hide circle
allowmixing

class Gateway <<domain>> <<service>> {
  appMasterKey <<secret>>
}

Gateway *- - "*" Account

class Account <<abstract>> <<subject>> {
  vf:primaryAccountable : UserAccount [1..*]
  timesheet : Timesheet [*]
  project : Project [*]
}
note left of Account::vf:primaryAccountable
  The account "admin".
  For user accounts, a
    redundant self-reference
    (user admins their own account).
end note
note left of Account::timesheet
  inverse injection: a Timesheet
  can only appear in one Account
end note
note left of Account::project
  inverse injection: a Project
  can only appear in one Account
end note

Account "provider" *- -> "*" Timesheet

Account "client" *- -> "*" Project

class UserAccount {
  email : string [1..*]
  keyid : string [*]
}
note left of UserAccount::email
  Registered email, used
  for account activation
end note
note left of UserAccount::keyid
  Matches ""auth.key""
  Can be revoked
end note
UserAccount - -|> Account

class OrganisationAccount {
}
OrganisationAccount - -|> Account
OrganisationAccount o- - "1..*" UserAccount

class Timesheet <<domain>> <<subject>> {
  //account<sub>p</sub> : Account//
  project : Project [*]
}
note left of Timesheet
  a subject in the
  Gateway domain;
  also a domain shared to
  authorised CLI clients
end note
note right of Timesheet::account
  entailed from
  Account.timesheet
end note
note right of Timesheet::project
  Can only be set by
  account admin
end note

class Project <<subject>> {
}
note right of Project
  **entailed __read__ access to a timesheet**
  (via Gateway export/publish)

  the user account must be the timesheet provider
  //or// the client of a project that contains the timesheet

  account<sub>u</sub> ∈
    account<sub>p</sub>.vf:primaryAccountable
  ∨
  ∃account<sub>c</sub>:Account ⦁
    account<sub>u</sub> ∈
      account<sub>c</sub>.vf:primaryAccountable
    ∧
    ∃project:Project ⦁
      project ∈ account<sub>c</sub>.project ∧
      project ∈ timesheet.project
end note

Project "*" - - "*" Timesheet

component CLI [
  CLI

  - - -
  auth.key <<secret>>
  account<sub>u</sub> (aka user)
  timesheets : domain [*]
]
note top of CLI
  Installed on a device
  under an OS account.
  Registered to user account
  via auth.key.
end note

UserAccount .. "*" CLI

CLI ..> "*" Timesheet
note bottom on link
  **entailed __read and write__ access**
  (via the CLI)

  the user account must be the timesheet provider

  account<sub>u</sub> ∈
    account<sub>p</sub>.vf:primaryAccountable
end note

class Key <<subject>> {
  keyid : string
  name : string
  secret : string
}
note left of Key::name
  account<sub>u</sub>
end note

UserAccount "1" - - "*" Key

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
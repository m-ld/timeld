<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="928px" preserveAspectRatio="none" style="width:1080px;height:928px;background:#FFFFFF;" version="1.1" viewBox="0 0 1080 928" width="1080px" zoomAndPan="magnify"><defs><filter height="300%" id="fn5n2cjulpvgm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[1a43f3003f8c278f89cc52af821a1f32]
cluster Ably--><polygon fill="#FFFFFF" filter="url(#fn5n2cjulpvgm)" points="492,296,530,296,537,318.4883,841,318.4883,841,455,492,455,492,296" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="492" x2="537" y1="318.4883" y2="318.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32" x="496" y="311.5352">Ably</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="640" y="334.0234">«service»</text><!--MD5=[cd8aea8b05f456e5d12ddf6e2609affc]
class AblyKey--><rect codeLine="122" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="91.9531" id="AblyKey" style="stroke:#A80036;stroke-width:1.5;" width="113" x="711.5" y="347"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="745" y="363.6016">AblyKey</text><line style="stroke:#A80036;stroke-width:1.5;" x1="712.5" x2="823.5" y1="371.1328" y2="371.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="717.5" y="385.7676">keyid</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="717.5" y="398.7227">name</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="717.5" y="411.6777">secret</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101" x="717.5" y="424.6328">capabilities : string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="712.5" x2="823.5" y1="430.9531" y2="430.9531"/><path d="M508,348.5 L508,376.8105 A0,0 0 0 0 508,376.8105 L585,376.8105 A0,0 0 0 0 585,376.8105 L585,366.6553 L715.5,394.5654 L585,358.6553 L585,358.5 L575,348.5 L508,348.5 A0,0 0 0 0 508,348.5 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M575,348.5 L575,358.5 L585,358.5 L575,348.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="514" y="366.0684">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="564" y="369.7012">u</text><path d="M508,386.8105 L508,427.4316 A0,0 0 0 0 508,427.4316 L676,427.4316 A0,0 0 0 0 676,427.4316 L676,411.1211 L715.5,420.4756 L676,403.1211 L676,396.8105 L666,386.8105 L508,386.8105 A0,0 0 0 0 508,386.8105 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M666,386.8105 L666,396.8105 L676,396.8105 L666,386.8105 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="514" y="404.3789">Defines channel access</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="514" y="419.6895">thus, timesheet access</text><!--MD5=[6de492f04047ff8a778df2bea690e363]
class Gateway--><rect codeLine="6" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="95.4863" id="Gateway" style="stroke:#A80036;stroke-width:1.5;" width="135" x="351.5" y="151"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="391.5" y="167.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="387.5" y="181.7344">«ably app»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="52" x="393" y="195.8672">«service»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="394.5" y="210">Gateway</text><line style="stroke:#A80036;stroke-width:1.5;" x1="352.5" x2="485.5" y1="217.5313" y2="217.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="357.5" y="232.166">appMasterKey «secret»</text><line style="stroke:#A80036;stroke-width:1.5;" x1="352.5" x2="485.5" y1="238.4863" y2="238.4863"/><!--MD5=[f9a29335b499db729be669fd1bd54958]
class Account--><rect codeLine="12" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="107.2637" id="Account" style="stroke:#A80036;stroke-width:1.5;" width="242" x="231" y="339.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="59" x="322.5" y="356.1016">«abstract»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="325" y="370.2344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="45" x="329.5" y="384.3672">Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="232" x2="472" y1="391.8984" y2="391.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="230" x="237" y="406.5332">vf:primaryAccountable : UserAccount [1..*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="237" y="419.4883">timesheet : IRI [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="237" y="432.4434">project : Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="232" x2="472" y1="438.7637" y2="438.7637"/><path d="M6,329.5 L6,446.6738 A0,0 0 0 0 6,446.6738 L196,446.6738 A0,0 0 0 0 196,446.6738 L196,392.0869 L235,402.376 L196,384.0869 L196,339.5 L186,329.5 L6,329.5 A0,0 0 0 0 6,329.5 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M186,329.5 L186,339.5 L196,339.5 L186,329.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="12" y="347.0684">The account "owner".</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="12" y="362.3789">For user accounts, a</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="20" y="377.6895">redundant self-reference.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="12" y="393">For org accounts,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="20" y="408.3105">"admin" user accounts.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="12" y="423.6211">Not necessarily redundant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="20" y="438.9316">with foaf:member</text><!--MD5=[0c2e12f724a2bba325ddf189ef351421]
class Timesheet--><rect codeLine="57" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="97.3086" id="Timesheet" style="stroke:#A80036;stroke-width:1.5;" width="112" x="421" y="817.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="449.5" y="834.1016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="450" y="848.2344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="447" y="862.3672">Timesheet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="422" x2="532" y1="869.8984" y2="869.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="43" x="427" y="884.5332">account</text><text fill="#000000" font-family="sans-serif" font-size="8" font-style="italic" lengthAdjust="spacing" textLength="3" x="470" y="887.5879">t</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="51" x="476" y="884.5332">: Account</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="427" y="900.4883">project : Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="422" x2="532" y1="906.8086" y2="906.8086"/><!--MD5=[79d378210367c0c6ec62ef762ddfbd1b]
class Project--><rect codeLine="76" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="80.1758" id="Project" style="stroke:#A80036;stroke-width:1.5;" width="109" x="297.5" y="604"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="325" y="620.6016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40" x="332" y="634.7344">Project</text><line style="stroke:#A80036;stroke-width:1.5;" x1="298.5" x2="405.5" y1="642.2656" y2="642.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="303.5" y="656.9004">vf:provider : IRI [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="303.5" y="669.8555">client : IRI [0..1]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="298.5" x2="405.5" y1="676.1758" y2="676.1758"/><!--MD5=[873670755c6433d3512a8b316aa6820d]
class UserAccount--><rect codeLine="31" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="66.043" id="UserAccount" style="stroke:#A80036;stroke-width:1.5;" width="97" x="719.5" y="165.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="732.5" y="182.1016">UserAccount</text><line style="stroke:#A80036;stroke-width:1.5;" x1="720.5" x2="815.5" y1="189.6328" y2="189.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="725.5" y="204.2676">email : string [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="725.5" y="217.2227">keyid : string [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="720.5" x2="815.5" y1="223.543" y2="223.543"/><path d="M521.5,148 L521.5,188.6211 A0,0 0 0 0 521.5,188.6211 L684.5,188.6211 A0,0 0 0 0 684.5,188.6211 L684.5,172.3105 L723.5,200.1104 L684.5,164.3105 L684.5,158 L674.5,148 L521.5,148 A0,0 0 0 0 521.5,148 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M674.5,148 L674.5,158 L684.5,158 L674.5,148 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="527.5" y="165.5684">Registered email, used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="527.5" y="180.8789">for account activation</text><path d="M521.5,198.6211 L521.5,239.2422 A0,0 0 0 0 521.5,239.2422 L662.5,239.2422 A0,0 0 0 0 662.5,239.2422 L662.5,222.9316 L723.5,213.0654 L662.5,214.9316 L662.5,208.6211 L652.5,198.6211 L521.5,198.6211 A0,0 0 0 0 521.5,198.6211 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M652.5,198.6211 L652.5,208.6211 L662.5,208.6211 L652.5,198.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="527.5" y="216.1895">Matches</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="583.5" y="215.8657">ably.key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="527.5" y="231.5">Can be revoked</text><!--MD5=[f5f68a7b4d1daa3f868d0f655b773560]
class OrganisationAccount--><rect codeLine="45" fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="53.0879" id="OrganisationAccount" style="stroke:#A80036;stroke-width:1.5;" width="175" x="337.5" y="20"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="366.5" y="36.6016">OrganisationAccount</text><line style="stroke:#A80036;stroke-width:1.5;" x1="338.5" x2="511.5" y1="44.1328" y2="44.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="163" x="343.5" y="58.7676">foaf:member : UserAccount [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="338.5" x2="511.5" y1="65.0879" y2="65.0879"/><path d="M135.5,6 L135.5,77.2422 A0,0 0 0 0 135.5,77.2422 L302.5,77.2422 A0,0 0 0 0 302.5,77.2422 L302.5,45.6211 L341.5,54.6104 L302.5,37.6211 L302.5,16 L292.5,6 L135.5,6 A0,0 0 0 0 135.5,6 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M292.5,6 L292.5,16 L302.5,16 L292.5,6 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="141.5" y="23.5684">Only user accounts:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="141.5" y="38.8789">no org hierarchy.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="141.5" y="54.1895">Used for project-based</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="141.5" y="69.5">authorisation.</text><path d="M214,830.5 L214,901.7422 A0,0 0 0 0 214,901.7422 L386,901.7422 A0,0 0 0 0 386,901.7422 L386,870 L420.89,866 L386,862 L386,840.5 L376,830.5 L214,830.5 A0,0 0 0 0 214,830.5 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M376,830.5 L376,840.5 L386,840.5 L376,830.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="220" y="848.0684">a subject in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="220" y="863.3789">Gateway domain;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="220" y="878.6895">also a domain shared to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="220" y="894">authorised CLI clients</text><path d="M568.5,815.5 L568.5,831.8105 L527,881.876 L568.5,839.8105 L568.5,856.1211 A0,0 0 0 0 568.5,856.1211 L707.5,856.1211 A0,0 0 0 0 707.5,856.1211 L707.5,825.5 L697.5,815.5 L568.5,815.5 A0,0 0 0 0 568.5,815.5 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M697.5,815.5 L697.5,825.5 L707.5,825.5 L697.5,815.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="574.5" y="833.0684">entailed from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="574.5" y="848.3789">Account.timesheet</text><path d="M568.5,866.1211 L568.5,882.4316 L527,896.3311 L568.5,890.4316 L568.5,906.7422 A0,0 0 0 0 568.5,906.7422 L727.5,906.7422 A0,0 0 0 0 727.5,906.7422 L727.5,876.1211 L717.5,866.1211 L568.5,866.1211 A0,0 0 0 0 568.5,866.1211 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M717.5,866.1211 L717.5,876.1211 L727.5,876.1211 L717.5,866.1211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="574.5" y="883.6895">Can only be set by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="574.5" y="899">account owner/admin</text><path d="M104,603.5 L104,674.7422 A0,0 0 0 0 104,674.7422 L262,674.7422 A0,0 0 0 0 262,674.7422 L262,643.1211 L301.5,652.7432 L262,635.1211 L262,613.5 L252,603.5 L104,603.5 A0,0 0 0 0 104,603.5 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M252,603.5 L252,613.5 L262,613.5 L252,603.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="110" y="621.0684">Typically singular.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="110" y="636.3789">A provider has access</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="110" y="651.6895">to all timesheets in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="110" y="667">the project.</text><!--MD5=[df6a39b053164d23cc3ecae9c3484a54]
entity CLI--><rect fill="#FEFECE" filter="url(#fn5n2cjulpvgm)" height="123.4414" style="stroke:#A80036;stroke-width:1.5;" width="199" x="859.5" y="331.5"/><rect fill="#FEFECE" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1038.5" y="336.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1036.5" y="338.5"/><rect fill="#FEFECE" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1036.5" y="342.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="874.5" y="365.0352">CLI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="878.5" y="381.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="860.5" x2="1057.5" y1="384.4766" y2="384.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="874.5" y="402.0117">ably.key «secret»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="874.5" y="418.5">account</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="928.5" y="422.1328">u</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="939.5" y="418.5">(aka user)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="874.5" y="437.9883">timesheets : domain [*]</text><path d="M864.5,163 L864.5,234.2422 A0,0 0 0 0 864.5,234.2422 L955,234.2422 L959,331.3 L963,234.2422 L1053.5,234.2422 A0,0 0 0 0 1053.5,234.2422 L1053.5,173 L1043.5,163 L864.5,163 A0,0 0 0 0 864.5,163 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1043.5,163 L1043.5,173 L1053.5,173 L1043.5,163 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="870.5" y="180.5684">Installed on a device</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="870.5" y="195.8789">under an OS account.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="870.5" y="211.1895">Registered to user account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="870.5" y="226.5">via ably.key.</text><!--MD5=[194d4a8dfc1f1dbb24ee205902653cbe]
reverse link Gateway to Account--><path codeLine="10" d="M398.5,258.4 C389.51,284.23 379.04,314.31 370.31,339.38 " fill="none" id="Gateway-backto-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="402.78,246.1,397.0315,250.4537,398.8393,257.4345,404.5878,253.0808,402.78,246.1" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="366.3673" y="328.7385">*</text><!--MD5=[f505804a0bb9275518c7372a2126ee0f]
link Account$$$LEFT to Account--><!--MD5=[f3ce057685e0ff9797995d99a96fc0ff]
link Account to Timesheet--><path codeLine="27" d="M389.9538,457.1052 C389.9538,457.1052 415.6,507.92 424,533.5 C454.09,625.06 467.42,736.65 473.09,804.19 " fill="none" id="Account-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="474.15,817.5,477.4253,808.2117,473.7543,812.5157,469.4503,808.8448,474.15,817.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="473.7543" x2="473.115" y1="812.5157" y2="804.54"/><polygon fill="#A80036" points="384.19,446.58,383.5635,453.7638,389.9538,457.1052,390.5803,449.9213,384.19,446.58" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="469" y="649.0684">owns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="467.2908" y="806.8435">*</text><!--MD5=[a1a4cfa532728efa24278c706b9245e3]
link Account to Project--><path codeLine="29" d="M352,458.5 C352,458.5 352,552.14 352,590.25 " fill="none" id="Account-Project" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="352,603.63,356,594.63,352,598.63,348,594.63,352,603.63" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="352" x2="352" y1="598.63" y2="590.63"/><polygon fill="#A80036" points="352,446.5,348,452.5,352,458.5,356,452.5,352,446.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="353" y="500.0684">owns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="314.6484" y="467.2684">client</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="345.5031" y="593.2811">*</text><!--MD5=[59bfd3b9fcea3a5880a303d33fa5646b]
link UserAccount$$$LEFT to UserAccount--><!--MD5=[008ba0f0b6901373239fc7803ec7bfb5]
link UserAccount to Account--><path codeLine="43" d="M731.48,231.5 C722.35,238.16 712.23,244.51 702,249 C615.07,287.15 579.01,250.05 492,288 C469.12,297.98 446.46,312.32 426.24,327.17 " fill="none" id="UserAccount-to-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="430.39,332.81,410.25,339.4,421.88,321.69,430.39,332.81" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f895a74b40bf5cac559ca4dae092dc82]
link OrganisationAccount$$$LEFT to OrganisationAccount--><!--MD5=[3bd2f785ce7fba86ff840f78f2677824]
link OrganisationAccount to Account--><path codeLine="54" d="M391.35,73.36 C370.48,91.63 345.51,118.13 334,148 C312.85,202.86 319.84,269.74 330.72,319.59 " fill="none" id="OrganisationAccount-to-Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="337.55,318.08,335.37,339.15,323.93,321.32,337.55,318.08" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3e3ddf26659482ebc6db1edb96e472ec]
reverse link OrganisationAccount to UserAccount--><path codeLine="55" d="M525.41,76.01 C579.41,93.28 646.18,117.81 702,148 C711.2,152.97 720.52,159.14 729.14,165.4 " fill="none" id="OrganisationAccount-backto-UserAccount" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="512.69,72,517.2135,77.6159,524.1372,75.6003,519.6137,69.9844,512.69,72" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="696.8564" y="154.6222">1..*</text><!--MD5=[f59287a37ea7426887cc54bb6a33788a]
link Timesheet to Timesheet$$$RIGHT--><!--MD5=[b41bb4ffffdbfbc0868067e6360a57dd]
link Project$$$LEFT to Project--><!--MD5=[c52c4d9618aad4a60bea30b2d0498325]
link Project to Timesheet--><path codeLine="87" d="M374.2,684.08 C395.39,721.37 427.35,777.61 450,817.48 " fill="none" id="Project-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="371.5" y="704.8378">*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="439.5938" y="806.8206">*</text><!--MD5=[3171026a460a65b82e10f3eaa254fce8]
link UserAccount to CLI--><path codeLine="104" d="M799.97,231.72 C826.84,258.8 865.98,298.25 898.71,331.24 " fill="none" id="UserAccount-CLI" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="885.3921" y="320.7926">*</text><!--MD5=[7eae40f39ba8424a7eed7bbcb9b34095]
link CLI to Timesheet--><path codeLine="106" d="M896.97,454.61 C801.17,548.22 618.94,726.3 529.36,813.83 " fill="none" id="CLI-to-Timesheet" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="525.69,817.42,534.9245,813.9959,529.268,813.9275,529.3365,808.271,525.69,817.42" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="858" y="547.0684">entailed access to timesheet</text><path d="M820,555.8105 L820,745.8105 L1071,745.8105 L1071,565.8105 L1061,555.8105 L820,555.8105 " fill="#FBFB77" filter="url(#fn5n2cjulpvgm)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1061,555.8105 L1061,565.8105 L1071,565.8105 L1061,555.8105 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="826" y="573.3789">let projectAccessors ==</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="834" y="588.6895">λp:Project ⦁ p.vf:provider ∪ p.client;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="826" y="604">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="876" y="607.6328">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="886" y="604">∈</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="834" y="622.3105">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="4" x="884" y="625.9434">t</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="888" y="622.3105">.vf:primaryAccountable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="826" y="640.6211">∨</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="826" y="655.9316">∃p:timesheet.project ⦁</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="834" y="671.2422">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="884" y="674.875">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="894" y="671.2422">∈ projectAccessors(p)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="834" y="689.5527">∨</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="834" y="704.8633">∃org:OrganisationAccount ⦁</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="842" y="720.1738">account</text><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="6" x="892" y="723.8066">u</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="902" y="720.1738">∈ org.foaf:member ∧</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="842" y="738.4844">org ∈ projectAccessors(p)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="526.4007" y="806.7518">*</text><!--MD5=[aaa4b569874f2939ef51bf111c950107]
link AblyKey$$$LEFT to AblyKey--><!--MD5=[601a963235cfb799dd4c132aab4bc84f]
link UserAccount to AblyKey--><path codeLine="136" d="M768,231.72 C768,263.19 768,311.37 768,346.69 " fill="none" id="UserAccount-AblyKey" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="759.2375" y="252.0761">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="761.5594" y="336.3813">*</text><!--MD5=[fc65427e8ed0c968ed1bbe292e3680f5]
@startuml
'https://plantuml.com/class-diagram

hide circle
allowmixing

class Gateway <<domain>> <<ably app>> <<service>> {
  appMasterKey <<secret>>
}

Gateway *- - "*" Account

class Account <<abstract>> <<subject>> {
  vf:primaryAccountable : UserAccount [1..*]
  timesheet : IRI [*]
  project : Project [*]
}
note left of Account::vf:primaryAccountable
  The account "owner".
  For user accounts, a
    redundant self-reference.
  For org accounts,
    "admin" user accounts.
  Not necessarily redundant
    with foaf:member
end note

Account *- -> "*" Timesheet: owns

Account "client" *- -> "*" Project: owns

class UserAccount {
  email : string [*]
  keyid : string [*]
}
note left of UserAccount::email
  Registered email, used
  for account activation
end note
note left of UserAccount::keyid
  Matches ""ably.key""
  Can be revoked
end note
UserAccount - -|> Account

class OrganisationAccount {
  foaf:member : UserAccount [*]
}
note left of OrganisationAccount::foaf:member
  Only user accounts:
  no org hierarchy.
  Used for project-based
  authorisation.
end note
OrganisationAccount - -|> Account
OrganisationAccount o- - "1..*" UserAccount

class Timesheet <<domain>> <<subject>> {
  //account<sub>t</sub> : Account//
  project : Project [*]
}
note left of Timesheet
  a subject in the
  Gateway domain;
  also a domain shared to
  authorised CLI clients
end note
note right of Timesheet::account
  entailed from
  Account.timesheet
end note
note right of Timesheet::project
  Can only be set by
  account owner/admin
end note

class Project <<subject>> {
  vf:provider : IRI [*]
  client : IRI [0..1]
}
note left of Project::vf:provider
  Typically singular.
  A provider has access
  to all timesheets in
  the project.
end note

Project "*" - - "*" Timesheet

component CLI [
  CLI

  - - -
  ably.key <<secret>>
  account<sub>u</sub> (aka user)
  timesheets : domain [*]
]
note top of CLI
  Installed on a device
  under an OS account.
  Registered to user account
  via ably.key.
end note

UserAccount .. "*" CLI

CLI ..> "*" Timesheet: entailed access to timesheet
note bottom on link
  let projectAccessors ==
    λp:Project ⦁ p.vf:provider ∪ p.client;
  account<sub>u</sub> ∈
    account<sub>t</sub>.vf:primaryAccountable
  ∨
  ∃p:timesheet.project ⦁
    account<sub>u</sub> ∈ projectAccessors(p)
    ∨
    ∃org:OrganisationAccount ⦁
      account<sub>u</sub> ∈ org.foaf:member ∧
      org ∈ projectAccessors(p)
end note

package Ably <<service>> {
  class AblyKey {
    keyid
    name
    secret
    capabilities : string
  }
  note left of AblyKey::name
    account<sub>u</sub>
  end note
  note left of AblyKey::capabilities
    Defines channel access
    thus, timesheet access
  end note

  UserAccount "1" - - "*" AblyKey
}

@enduml

@startuml

hide circle
allowmixing

class Gateway <<domain>> <<ably app>> <<service>> {
  appMasterKey <<secret>>
}

Gateway *- - "*" Account

class Account <<abstract>> <<subject>> {
  vf:primaryAccountable : UserAccount [1..*]
  timesheet : IRI [*]
  project : Project [*]
}
note left of Account::vf:primaryAccountable
  The account "owner".
  For user accounts, a
    redundant self-reference.
  For org accounts,
    "admin" user accounts.
  Not necessarily redundant
    with foaf:member
end note

Account *- -> "*" Timesheet: owns

Account "client" *- -> "*" Project: owns

class UserAccount {
  email : string [*]
  keyid : string [*]
}
note left of UserAccount::email
  Registered email, used
  for account activation
end note
note left of UserAccount::keyid
  Matches ""ably.key""
  Can be revoked
end note
UserAccount - -|> Account

class OrganisationAccount {
  foaf:member : UserAccount [*]
}
note left of OrganisationAccount::foaf:member
  Only user accounts:
  no org hierarchy.
  Used for project-based
  authorisation.
end note
OrganisationAccount - -|> Account
OrganisationAccount o- - "1..*" UserAccount

class Timesheet <<domain>> <<subject>> {
  //account<sub>t</sub> : Account//
  project : Project [*]
}
note left of Timesheet
  a subject in the
  Gateway domain;
  also a domain shared to
  authorised CLI clients
end note
note right of Timesheet::account
  entailed from
  Account.timesheet
end note
note right of Timesheet::project
  Can only be set by
  account owner/admin
end note

class Project <<subject>> {
  vf:provider : IRI [*]
  client : IRI [0..1]
}
note left of Project::vf:provider
  Typically singular.
  A provider has access
  to all timesheets in
  the project.
end note

Project "*" - - "*" Timesheet

component CLI [
  CLI

  - - -
  ably.key <<secret>>
  account<sub>u</sub> (aka user)
  timesheets : domain [*]
]
note top of CLI
  Installed on a device
  under an OS account.
  Registered to user account
  via ably.key.
end note

UserAccount .. "*" CLI

CLI ..> "*" Timesheet: entailed access to timesheet
note bottom on link
  let projectAccessors ==
    λp:Project ⦁ p.vf:provider ∪ p.client;
  account<sub>u</sub> ∈
    account<sub>t</sub>.vf:primaryAccountable
  ∨
  ∃p:timesheet.project ⦁
    account<sub>u</sub> ∈ projectAccessors(p)
    ∨
    ∃org:OrganisationAccount ⦁
      account<sub>u</sub> ∈ org.foaf:member ∧
      org ∈ projectAccessors(p)
end note

package Ably <<service>> {
  class AblyKey {
    keyid
    name
    secret
    capabilities : string
  }
  note left of AblyKey::name
    account<sub>u</sub>
  end note
  note left of AblyKey::capabilities
    Defines channel access
    thus, timesheet access
  end note

  UserAccount "1" - - "*" AblyKey
}

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
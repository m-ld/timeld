<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="576px" preserveAspectRatio="none" style="width:857px;height:576px;background:#FFFFFF;" version="1.1" viewBox="0 0 857 576" width="857px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lg0prrtosn6h" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f9a29335b499db729be669fd1bd54958]
class Account--><rect codeLine="6" fill="#FEFECE" filter="url(#f1lg0prrtosn6h)" height="80.1758" id="Account" style="stroke:#A80036;stroke-width:1.5;" width="144" x="539.5" y="163.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="584.5" y="180.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="589" y="194.2344">Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="540.5" x2="682.5" y1="201.7656" y2="201.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="545.5" y="216.4004">timesheet : Timesheet [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="545.5" y="229.3555">project : Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="540.5" x2="682.5" y1="235.6758" y2="235.6758"/><!--MD5=[0c2e12f724a2bba325ddf189ef351421]
class Timesheet--><rect codeLine="11" fill="#FEFECE" filter="url(#f1lg0prrtosn6h)" height="94.3086" id="Timesheet" style="stroke:#A80036;stroke-width:1.5;" width="149" x="537" y="399"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="584" y="415.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="584.5" y="429.7344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="581.5" y="443.8672">Timesheet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="538" x2="685" y1="451.3984" y2="451.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="543" y="466.0332">project : Project [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="543" y="478.9883">external : Reference [0..1]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="538" x2="685" y1="485.3086" y2="485.3086"/><path d="M721,420.5 L721,436.8105 L680,474.8311 L721,444.8105 L721,461.1211 A0,0 0 0 0 721,461.1211 L848,461.1211 A0,0 0 0 0 848,461.1211 L848,430.5 L838,420.5 L721,420.5 A0,0 0 0 0 721,420.5 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M838,420.5 L838,430.5 L848,430.5 L838,420.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="727" y="438.0684">The original</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="727" y="453.3789">system of record</text><!--MD5=[a3a837a34aad17048931616634bf581a]
class ConnectorExtension--><rect codeLine="22" fill="#FEFECE" filter="url(#f1lg0prrtosn6h)" height="80.1758" id="ConnectorExtension" style="stroke:#A80036;stroke-width:1.5;" width="191" x="71" y="163.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="139.5" y="180.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="110" y="194.2344">ConnectorExtension</text><line style="stroke:#A80036;stroke-width:1.5;" x1="72" x2="261" y1="201.7656" y2="201.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="77" y="216.4004">module : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="179" x="77" y="229.3555">appliesTo : Timesheet | Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="72" x2="261" y1="235.6758" y2="235.6758"/><path d="M71,6 L71,92.5527 A0,0 0 0 0 71,92.5527 L162.5,92.5527 L166.5,163.45 L170.5,92.5527 L262,92.5527 A0,0 0 0 0 262,92.5527 L262,16 L252,6 L71,6 A0,0 0 0 0 71,6 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M252,6 L252,16 L262,16 L252,6 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="77" y="23.5684">Represents another system</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="77" y="38.8789">whose language we speak,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="77" y="54.1895">for the limited purpose</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="77" y="69.5">of pushing</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="50" x="149" y="69.5">updates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="203" y="69.5">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="77" y="84.8105">responding</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="152" y="84.8105">snapshots</text><path d="M297,153 L297,169.3105 L158,212.2432 L297,177.3105 L297,193.6211 A0,0 0 0 0 297,193.6211 L454,193.6211 A0,0 0 0 0 454,193.6211 L454,163 L444,153 L297,153 A0,0 0 0 0 297,153 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M444,153 L444,163 L454,163 L444,153 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="303" y="170.5684">NodeJS ESM import of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="303" y="185.8789">Connector class</text><path d="M297,203.6211 L297,219.9316 L256,225.1982 L297,227.9316 L297,244.2422 A0,0 0 0 0 297,244.2422 L454,244.2422 A0,0 0 0 0 454,244.2422 L454,213.6211 L444,203.6211 L297,203.6211 A0,0 0 0 0 297,203.6211 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M444,203.6211 L444,213.6211 L454,213.6211 L444,203.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="303" y="221.1895">Selection of account-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="303" y="236.5">owned data</text><!--MD5=[2e807730047ae2e9fc9e944cb69597f3]
class Connector--><rect codeLine="46" fill="#FEFECE" filter="url(#f1lg0prrtosn6h)" height="144.9512" id="Connector" style="stroke:#A80036;stroke-width:1.5;" width="219" x="7" y="373.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="82.5" y="390.1016">«javascript»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="58" x="87.5" y="404.2344">Connector</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="225" y1="411.7656" y2="411.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="94" x="13" y="426.4004">configKey : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="108" x="13" y="439.3555">contentType : string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="225" y1="445.6758" y2="445.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="13" y="460.3105">constructor(config, ext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="207" x="13" y="473.2656">syncTimesheet(tsId, state): Observable</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="13" y="486.2207">entryUpdate(tsId, update, state)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="195" x="13" y="499.1758">reportTimesheet(tsId, state) : Stream</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="13" y="512.1309">accountUpdate(update)</text><path d="M261,314 L261,337.9658 L142,456.1533 L261,345.9658 L261,369.9316 A0,0 0 0 0 261,369.9316 L502,369.9316 A0,0 0 0 0 502,369.9316 L502,324 L492,314 L261,314 A0,0 0 0 0 261,314 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M492,314 L492,324 L502,324 L492,314 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="267" y="331.5684">passed configuration (inc. secrets)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="267" y="346.8789">and extension, can have properties</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="267" y="362.1895">storing additional config &amp; data</text><path d="M261,379.9316 L261,403.8975 L220,469.1084 L261,411.8975 L261,435.8633 A0,0 0 0 0 261,435.8633 L473,435.8633 A0,0 0 0 0 473,435.8633 L473,389.9316 L463,379.9316 L261,379.9316 A0,0 0 0 0 261,379.9316 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M463,379.9316 L463,389.9316 L473,389.9316 L463,379.9316 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="267" y="397.5">Establish sync, e.g. initial</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="267" y="412.8105">import or export; then provide</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="267" y="428.1211">ongoing updates</text><path d="M261,445.8633 L261,477.4844 L182,482.0635 L261,485.4844 L261,517.1055 A0,0 0 0 0 261,517.1055 L463,517.1055 A0,0 0 0 0 463,517.1055 L463,455.8633 L453,445.8633 L261,445.8633 A0,0 0 0 0 261,445.8633 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M453,445.8633 L453,455.8633 L463,455.8633 L453,445.8633 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="267" y="463.4316">Update of Timesheet Entries.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="267" y="478.7422">Provided with the Timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="267" y="494.0527">ID, raw m-ld update, the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="267" y="509.3633">current Timesheet state</text><path d="M261,527.1055 L261,543.416 L139,507.9736 L261,551.416 L261,567.7266 A0,0 0 0 0 261,567.7266 L464,567.7266 A0,0 0 0 0 464,567.7266 L464,537.1055 L454,527.1055 L261,527.1055 A0,0 0 0 0 261,527.1055 " fill="#FBFB77" filter="url(#f1lg0prrtosn6h)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M454,527.1055 L454,537.1055 L464,537.1055 L454,527.1055 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="267" y="544.6738">Limited account updates e.g.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="267" y="559.9844">create/delete Timesheet</text><!--MD5=[f59287a37ea7426887cc54bb6a33788a]
link Timesheet to Timesheet$$$RIGHT--><!--MD5=[f3ce057685e0ff9797995d99a96fc0ff]
link Account to Timesheet--><path codeLine="20" d="M611.5,255.68 C611.5,255.68 611.5,346.18 611.5,385.68 " fill="none" id="Account-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="611.5,398.85,615.5,389.85,611.5,393.85,607.5,389.85,611.5,398.85" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="611.5" x2="611.5" y1="393.85" y2="385.85"/><polygon fill="#A80036" points="611.5,243.68,607.5,249.68,611.5,255.68,615.5,249.68,611.5,243.68" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="605.0594" y="388.3918">*</text><!--MD5=[6cf88e85dcf6b86d710f06ba58dc7e53]
link ConnectorExtension to ConnectorExtension$$$RIGHT--><!--MD5=[83282e75ddbe438018ccb7f527e1cd69]
link ConnectorExtension to Timesheet--><path codeLine="44" d="M251.66,243.6 C260.97,247.34 270.38,250.89 279.5,254 C383.56,289.52 428.86,251.76 519.5,314 C550.31,335.16 574.14,370.25 589.82,398.78 " fill="none" id="ConnectorExtension-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[86a9b501da393c43fd4531716622ed35]
link Connector to Connector$$$RIGHT--><!--MD5=[c2358816ba66ef764ca464d78ea400bf]
link ConnectorExtension to Connector--><path codeLine="79" d="M158.36,243.68 C151.08,278.68 140.23,330.85 131.41,373.3 " fill="none" id="ConnectorExtension-Connector" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="28.8429" y="362.6163">implementation</text><!--MD5=[0acd27b93c57f7fc98767aec634bdb40]
@startuml
'https://plantuml.com/class-diagram

hide circle
allowmixing

abstract class Account <<subject>> {
  timesheet : Timesheet [*]
  project : Project [*]
}

class Timesheet <<domain>> <<subject>> {
  project : Project [*]
  external : Reference [0..1]
}
note right of Timesheet::external
  The original
  system of record
end note

Account *- -> "*" Timesheet

class ConnectorExtension <<subject>> {
  module : string
  appliesTo : Timesheet | Project [*]
}
note top of ConnectorExtension
  Represents another system
  whose language we speak,
  for the limited purpose
  of pushing //updates// and
  responding //snapshots//
end note

note right of ConnectorExtension::module
  NodeJS ESM import of
  Connector class
end note

note right of ConnectorExtension::appliesTo
  Selection of account-
  owned data
end note

ConnectorExtension - - Timesheet

abstract class Connector <<javascript>> {
  {static} configKey : string
  {static} contentType : string
  constructor(config, ext)
  syncTimesheet(tsId, state): Observable
  entryUpdate(tsId, update, state)
  reportTimesheet(tsId, state) : Stream
  accountUpdate(update)
}
note right of Connector::constructor
  passed configuration (inc. secrets)
  and extension, can have properties
  storing additional config & data
end note

note right of Connector::syncTimesheet
  Establish sync, e.g. initial
  import or export; then provide
  ongoing updates
end note

note right of Connector::entryUpdate
  Update of Timesheet Entries.
  Provided with the Timesheet
  ID, raw m-ld update, the
  current Timesheet state
end note

note right of Connector::accountUpdate
  Limited account updates e.g.
  create/delete Timesheet
end note

ConnectorExtension - - "implementation" Connector

@enduml

@startuml

hide circle
allowmixing

abstract class Account <<subject>> {
  timesheet : Timesheet [*]
  project : Project [*]
}

class Timesheet <<domain>> <<subject>> {
  project : Project [*]
  external : Reference [0..1]
}
note right of Timesheet::external
  The original
  system of record
end note

Account *- -> "*" Timesheet

class ConnectorExtension <<subject>> {
  module : string
  appliesTo : Timesheet | Project [*]
}
note top of ConnectorExtension
  Represents another system
  whose language we speak,
  for the limited purpose
  of pushing //updates// and
  responding //snapshots//
end note

note right of ConnectorExtension::module
  NodeJS ESM import of
  Connector class
end note

note right of ConnectorExtension::appliesTo
  Selection of account-
  owned data
end note

ConnectorExtension - - Timesheet

abstract class Connector <<javascript>> {
  {static} configKey : string
  {static} contentType : string
  constructor(config, ext)
  syncTimesheet(tsId, state): Observable
  entryUpdate(tsId, update, state)
  reportTimesheet(tsId, state) : Stream
  accountUpdate(update)
}
note right of Connector::constructor
  passed configuration (inc. secrets)
  and extension, can have properties
  storing additional config & data
end note

note right of Connector::syncTimesheet
  Establish sync, e.g. initial
  import or export; then provide
  ongoing updates
end note

note right of Connector::entryUpdate
  Update of Timesheet Entries.
  Provided with the Timesheet
  ID, raw m-ld update, the
  current Timesheet state
end note

note right of Connector::accountUpdate
  Limited account updates e.g.
  create/delete Timesheet
end note

ConnectorExtension - - "implementation" Connector

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
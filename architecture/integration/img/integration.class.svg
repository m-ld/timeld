<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="517px" preserveAspectRatio="none" style="width:844px;height:517px;background:#FFFFFF;" version="1.1" viewBox="0 0 844 517" width="844px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vs04uhlqoyfh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f9a29335b499db729be669fd1bd54958]
class Account--><rect codeLine="6" fill="#FEFECE" filter="url(#f1vs04uhlqoyfh)" height="93.1309" id="Account" style="stroke:#A80036;stroke-width:1.5;" width="208" x="138.5" y="7"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="215.5" y="23.6016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="220" y="37.7344">Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="139.5" x2="345.5" y1="45.2656" y2="45.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="144.5" y="59.9004">timesheet : Timesheet [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="144.5" y="72.8555">project : Project [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="196" x="144.5" y="85.8105">integration : IntegrationExtension [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="139.5" x2="345.5" y1="92.1309" y2="92.1309"/><!--MD5=[0c2e12f724a2bba325ddf189ef351421]
class Timesheet--><rect codeLine="12" fill="#FEFECE" filter="url(#f1vs04uhlqoyfh)" height="94.3086" id="Timesheet" style="stroke:#A80036;stroke-width:1.5;" width="149" x="168" y="373"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="215" y="389.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="215.5" y="403.7344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="212.5" y="417.8672">Timesheet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="169" x2="316" y1="425.3984" y2="425.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="174" y="440.0332">project : Project [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="174" y="452.9883">external : Reference [0..1]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="169" x2="316" y1="459.3086" y2="459.3086"/><path d="M6,394.5 L6,435.1211 A0,0 0 0 0 6,435.1211 L133,435.1211 A0,0 0 0 0 133,435.1211 L133,418.8105 L172,448.8311 L133,410.8105 L133,404.5 L123,394.5 L6,394.5 A0,0 0 0 0 6,394.5 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M123,394.5 L123,404.5 L133,404.5 L123,394.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="12" y="412.0684">The original</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="12" y="427.3789">system of record</text><!--MD5=[67322396e0870b92a3176ec9a6b0e661]
class IntegrationExtension--><rect codeLine="23" fill="#FEFECE" filter="url(#f1vs04uhlqoyfh)" height="80.1758" id="IntegrationExtension" style="stroke:#A80036;stroke-width:1.5;" width="191" x="328" y="170.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="396.5" y="187.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="365.5" y="201.2344">IntegrationExtension</text><line style="stroke:#A80036;stroke-width:1.5;" x1="329" x2="518" y1="208.7656" y2="208.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="334" y="223.4004">module : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="179" x="334" y="236.3555">appliesTo : Timesheet | Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="329" x2="518" y1="242.6758" y2="242.6758"/><path d="M382,10 L382,96.5527 A0,0 0 0 0 382,96.5527 L458.6,96.5527 L437.15,170.33 L466.6,96.5527 L573,96.5527 A0,0 0 0 0 573,96.5527 L573,20 L563,10 L382,10 A0,0 0 0 0 382,10 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M563,10 L563,20 L573,20 L563,10 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="388" y="27.5684">Represents another system</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="388" y="42.8789">whose language we speak,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="388" y="58.1895">for the limited purpose</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="388" y="73.5">of pushing</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="50" x="460" y="73.5">updates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="514" y="73.5">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="388" y="88.8105">responding</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="463" y="88.8105">snapshots</text><path d="M554,160 L554,176.3105 L415,219.2432 L554,184.3105 L554,200.6211 A0,0 0 0 0 554,200.6211 L711,200.6211 A0,0 0 0 0 711,200.6211 L711,170 L701,160 L554,160 A0,0 0 0 0 554,160 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M701,160 L701,170 L711,170 L701,160 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="560" y="177.5684">NodeJS ESM import of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="560" y="192.8789">Integration class</text><path d="M554,210.6211 L554,226.9316 L513,232.1982 L554,234.9316 L554,251.2422 A0,0 0 0 0 554,251.2422 L711,251.2422 A0,0 0 0 0 711,251.2422 L711,220.6211 L701,210.6211 L554,210.6211 A0,0 0 0 0 554,210.6211 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M701,210.6211 L701,220.6211 L711,220.6211 L701,210.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="560" y="228.1895">Selection of account-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="560" y="243.5">owned data</text><!--MD5=[6e581c5ef3353b90b39e7c205f6af5fd]
class Integration--><rect codeLine="49" fill="#FEFECE" filter="url(#f1vs04uhlqoyfh)" height="131.9961" id="Integration" style="stroke:#A80036;stroke-width:1.5;" width="207" x="352" y="354"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="421.5" y="370.6016">«javascript»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="425" y="384.7344">Integration</text><line style="stroke:#A80036;stroke-width:1.5;" x1="353" x2="558" y1="392.2656" y2="392.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="94" x="358" y="406.9004">configKey : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="108" x="358" y="419.8555">contentType : string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="353" x2="558" y1="426.1758" y2="426.1758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="358" y="440.8105">constructor(config, ext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="358" y="453.7656">entryUpdate(tsId, update, state)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="195" x="358" y="466.7207">reportTimesheet(tsId, state) : Stream</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="358" y="479.6758">accountUpdate(update)</text><path d="M594,321 L594,344.9658 L487,436.6533 L594,352.9658 L594,376.9316 A0,0 0 0 0 594,376.9316 L835,376.9316 A0,0 0 0 0 835,376.9316 L835,331 L825,321 L594,321 A0,0 0 0 0 594,321 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M825,321 L825,331 L835,331 L825,321 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="600" y="338.5684">passed configuration (inc. secrets)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="600" y="353.8789">and extension, can have properties</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="600" y="369.1895">storing additional data</text><path d="M594,386.9316 L594,418.5527 L527,449.6084 L594,426.5527 L594,458.1738 A0,0 0 0 0 594,458.1738 L796,458.1738 A0,0 0 0 0 796,458.1738 L796,396.9316 L786,386.9316 L594,386.9316 A0,0 0 0 0 594,386.9316 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M786,386.9316 L786,396.9316 L796,396.9316 L786,386.9316 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="600" y="404.5">Update of Timesheet Entries.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="600" y="419.8105">Provided with the Timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="600" y="435.1211">ID, raw m-ld update, the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="600" y="450.4316">current Timesheet state</text><path d="M594,468.1738 L594,484.4844 L484,475.5186 L594,492.4844 L594,508.7949 A0,0 0 0 0 594,508.7949 L797,508.7949 A0,0 0 0 0 797,508.7949 L797,478.1738 L787,468.1738 L594,468.1738 A0,0 0 0 0 594,468.1738 " fill="#FBFB77" filter="url(#f1vs04uhlqoyfh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M787,468.1738 L787,478.1738 L797,478.1738 L787,468.1738 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="600" y="485.7422">Limited account updates e.g.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="600" y="501.0527">create/delete Timesheet</text><!--MD5=[223ffe069d88f2c2fa0f1d7f30144c51]
link Timesheet$$$LEFT to Timesheet--><!--MD5=[f3ce057685e0ff9797995d99a96fc0ff]
link Account to Timesheet--><path codeLine="21" d="M242.5,112.3 C242.5,112.3 242.5,291.56 242.5,359.42 " fill="none" id="Account-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242.5,372.82,246.5,363.82,242.5,367.82,238.5,363.82,242.5,372.82" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242.5" x2="242.5" y1="367.82" y2="359.82"/><polygon fill="#A80036" points="242.5,100.3,238.5,106.3,242.5,112.3,246.5,106.3,242.5,100.3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="236.0594" y="362.3574">*</text><!--MD5=[ec582d29987a1bd7ef00a3777023e8e6]
link IntegrationExtension to IntegrationExtension$$$RIGHT--><!--MD5=[2a94487a5a9f8c190fdcdaa3e3e2a573]
link IntegrationExtension to Timesheet--><path codeLine="45" d="M389.46,250.53 C359.14,285.28 314.76,336.16 282.71,372.9 " fill="none" id="IntegrationExtension-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="282.4078" y="362.1079">*</text><!--MD5=[bd1832094884603d1f28a25bdf66abe3]
link Account to IntegrationExtension--><path codeLine="47" d="M304.9429,107.9773 C304.9429,107.9773 348.26,145.07 367.89,161.88 " fill="none" id="Account-IntegrationExtension" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="377.9,170.45,373.6603,161.5604,374.1002,167.2001,368.4605,167.64,377.9,170.45" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="374.1002" x2="368.025" y1="167.2001" y2="161.995"/><polygon fill="#A80036" points="295.83,100.17,297.784,107.1113,304.9429,107.9773,302.9889,101.036,295.83,100.17" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="363.5469" y="159.8573">*</text><!--MD5=[835f5fc12f54b3c88b17ac4337f133df]
link Integration to Integration$$$RIGHT--><!--MD5=[84419ab8a7f34e713c8c5c5466e69c3d]
link IntegrationExtension to Integration--><path codeLine="75" d="M429.52,250.53 C433.99,279.53 440.19,319.75 445.42,353.63 " fill="none" id="IntegrationExtension-Integration" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="339.9034" y="343.136">implementation</text><!--MD5=[b3475256e838248c714e7fdab8dd0b38]
@startuml
'https://plantuml.com/class-diagram

hide circle
allowmixing

abstract class Account <<subject>> {
  timesheet : Timesheet [*]
  project : Project [*]
  integration : IntegrationExtension [*]
}

class Timesheet <<domain>> <<subject>> {
  project : Project [*]
  external : Reference [0..1]
}
note left of Timesheet::external
  The original
  system of record
end note

Account *- -> "*" Timesheet

class IntegrationExtension <<subject>> {
  module : string
  appliesTo : Timesheet | Project [*]
}
note top of IntegrationExtension
  Represents another system
  whose language we speak,
  for the limited purpose
  of pushing //updates// and
  responding //snapshots//
end note

note right of IntegrationExtension::module
  NodeJS ESM import of
  Integration class
end note

note right of IntegrationExtension::appliesTo
  Selection of account-
  owned data
end note

IntegrationExtension - - "*" Timesheet

Account *- -> "*" IntegrationExtension

abstract class Integration <<javascript>> {
  {static} configKey : string
  {static} contentType : string
  constructor(config, ext)
  entryUpdate(tsId, update, state)
  reportTimesheet(tsId, state) : Stream
  accountUpdate(update)
}
note right of Integration::constructor
  passed configuration (inc. secrets)
  and extension, can have properties
  storing additional data
end note

note right of Integration::entryUpdate
  Update of Timesheet Entries.
  Provided with the Timesheet
  ID, raw m-ld update, the
  current Timesheet state
end note

note right of Integration::accountUpdate
  Limited account updates e.g.
  create/delete Timesheet
end note

IntegrationExtension - - "implementation" Integration

@enduml

@startuml

hide circle
allowmixing

abstract class Account <<subject>> {
  timesheet : Timesheet [*]
  project : Project [*]
  integration : IntegrationExtension [*]
}

class Timesheet <<domain>> <<subject>> {
  project : Project [*]
  external : Reference [0..1]
}
note left of Timesheet::external
  The original
  system of record
end note

Account *- -> "*" Timesheet

class IntegrationExtension <<subject>> {
  module : string
  appliesTo : Timesheet | Project [*]
}
note top of IntegrationExtension
  Represents another system
  whose language we speak,
  for the limited purpose
  of pushing //updates// and
  responding //snapshots//
end note

note right of IntegrationExtension::module
  NodeJS ESM import of
  Integration class
end note

note right of IntegrationExtension::appliesTo
  Selection of account-
  owned data
end note

IntegrationExtension - - "*" Timesheet

Account *- -> "*" IntegrationExtension

abstract class Integration <<javascript>> {
  {static} configKey : string
  {static} contentType : string
  constructor(config, ext)
  entryUpdate(tsId, update, state)
  reportTimesheet(tsId, state) : Stream
  accountUpdate(update)
}
note right of Integration::constructor
  passed configuration (inc. secrets)
  and extension, can have properties
  storing additional data
end note

note right of Integration::entryUpdate
  Update of Timesheet Entries.
  Provided with the Timesheet
  ID, raw m-ld update, the
  current Timesheet state
end note

note right of Integration::accountUpdate
  Limited account updates e.g.
  create/delete Timesheet
end note

IntegrationExtension - - "implementation" Integration

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>
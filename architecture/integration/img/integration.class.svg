<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="583px" preserveAspectRatio="none" style="width:856px;height:583px;background:#FFFFFF;" version="1.1" viewBox="0 0 856 583" width="856px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g90nffrex2cv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f9a29335b499db729be669fd1bd54958]
class Account--><rect codeLine="6" fill="#FEFECE" filter="url(#f1g90nffrex2cv)" height="93.1309" id="Account" style="stroke:#A80036;stroke-width:1.5;" width="208" x="138.5" y="7"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="215.5" y="23.6016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="220" y="37.7344">Account</text><line style="stroke:#A80036;stroke-width:1.5;" x1="139.5" x2="345.5" y1="45.2656" y2="45.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="144.5" y="59.9004">timesheet : Timesheet [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="144.5" y="72.8555">project : Project [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="196" x="144.5" y="85.8105">integration : IntegrationExtension [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="139.5" x2="345.5" y1="92.1309" y2="92.1309"/><!--MD5=[0c2e12f724a2bba325ddf189ef351421]
class Timesheet--><rect codeLine="12" fill="#FEFECE" filter="url(#f1g90nffrex2cv)" height="94.3086" id="Timesheet" style="stroke:#A80036;stroke-width:1.5;" width="149" x="168" y="406"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="215" y="422.6016">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="215.5" y="436.7344">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="212.5" y="450.8672">Timesheet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="169" x2="316" y1="458.3984" y2="458.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="174" y="473.0332">project : Project [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="174" y="485.9883">external : Reference [0..1]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="169" x2="316" y1="492.3086" y2="492.3086"/><path d="M6,427.5 L6,468.1211 A0,0 0 0 0 6,468.1211 L133,468.1211 A0,0 0 0 0 133,468.1211 L133,451.8105 L172,481.8311 L133,443.8105 L133,437.5 L123,427.5 L6,427.5 A0,0 0 0 0 6,427.5 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M123,427.5 L123,437.5 L133,437.5 L123,427.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="12" y="445.0684">The original</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="12" y="460.3789">system of record</text><!--MD5=[67322396e0870b92a3176ec9a6b0e661]
class IntegrationExtension--><rect codeLine="23" fill="#FEFECE" filter="url(#f1g90nffrex2cv)" height="80.1758" id="IntegrationExtension" style="stroke:#A80036;stroke-width:1.5;" width="191" x="331" y="170.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="54" x="399.5" y="187.1016">«subject»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="368.5" y="201.2344">IntegrationExtension</text><line style="stroke:#A80036;stroke-width:1.5;" x1="332" x2="521" y1="208.7656" y2="208.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="337" y="223.4004">module : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="179" x="337" y="236.3555">appliesTo : Timesheet | Project [*]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="332" x2="521" y1="242.6758" y2="242.6758"/><path d="M382,10 L382,96.5527 A0,0 0 0 0 382,96.5527 L459.43,96.5527 L439.39,170.33 L467.43,96.5527 L573,96.5527 A0,0 0 0 0 573,96.5527 L573,20 L563,10 L382,10 A0,0 0 0 0 382,10 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M563,10 L563,20 L573,20 L563,10 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="388" y="27.5684">Represents another system</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="388" y="42.8789">whose language we speak,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="388" y="58.1895">for the limited purpose</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="388" y="73.5">of pushing</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="50" x="460" y="73.5">updates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="514" y="73.5">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="388" y="88.8105">responding</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="463" y="88.8105">snapshots</text><path d="M557,160 L557,176.3105 L418,219.2432 L557,184.3105 L557,200.6211 A0,0 0 0 0 557,200.6211 L714,200.6211 A0,0 0 0 0 714,200.6211 L714,170 L704,160 L557,160 A0,0 0 0 0 557,160 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M704,160 L704,170 L714,170 L704,160 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="563" y="177.5684">NodeJS ESM import of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="563" y="192.8789">Integration class</text><path d="M557,210.6211 L557,226.9316 L516,232.1982 L557,234.9316 L557,251.2422 A0,0 0 0 0 557,251.2422 L714,251.2422 A0,0 0 0 0 714,251.2422 L714,220.6211 L704,210.6211 L557,210.6211 A0,0 0 0 0 557,210.6211 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M704,210.6211 L704,220.6211 L714,220.6211 L704,210.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="563" y="228.1895">Selection of account-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="563" y="243.5">owned data</text><!--MD5=[6e581c5ef3353b90b39e7c205f6af5fd]
class Integration--><rect codeLine="49" fill="#FEFECE" filter="url(#f1g90nffrex2cv)" height="144.9512" id="Integration" style="stroke:#A80036;stroke-width:1.5;" width="219" x="352" y="380.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="427.5" y="397.1016">«javascript»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="431" y="411.2344">Integration</text><line style="stroke:#A80036;stroke-width:1.5;" x1="353" x2="570" y1="418.7656" y2="418.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="94" x="358" y="433.4004">configKey : string</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="108" x="358" y="446.3555">contentType : string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="353" x2="570" y1="452.6758" y2="452.6758"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="129" x="358" y="467.3105">constructor(config, ext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="207" x="358" y="480.2656">syncTimesheet(tsId, state): Observable</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="169" x="358" y="493.2207">entryUpdate(tsId, update, state)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="195" x="358" y="506.1758">reportTimesheet(tsId, state) : Stream</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="358" y="519.1309">accountUpdate(update)</text><path d="M606,321 L606,344.9658 L487,463.1533 L606,352.9658 L606,376.9316 A0,0 0 0 0 606,376.9316 L847,376.9316 A0,0 0 0 0 847,376.9316 L847,331 L837,321 L606,321 A0,0 0 0 0 606,321 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M837,321 L837,331 L847,331 L837,321 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="612" y="338.5684">passed configuration (inc. secrets)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="612" y="353.8789">and extension, can have properties</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="612" y="369.1895">storing additional data</text><path d="M606,386.9316 L606,410.8975 L565,476.1084 L606,418.8975 L606,442.8633 A0,0 0 0 0 606,442.8633 L818,442.8633 A0,0 0 0 0 818,442.8633 L818,396.9316 L808,386.9316 L606,386.9316 A0,0 0 0 0 606,386.9316 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M808,386.9316 L808,396.9316 L818,396.9316 L808,386.9316 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="612" y="404.5">Establish sync, e.g. initial</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="612" y="419.8105">import or export; then provide</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="612" y="435.1211">ongoing updates</text><path d="M606,452.8633 L606,484.4844 L527,489.0635 L606,492.4844 L606,524.1055 A0,0 0 0 0 606,524.1055 L808,524.1055 A0,0 0 0 0 808,524.1055 L808,462.8633 L798,452.8633 L606,452.8633 A0,0 0 0 0 606,452.8633 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M798,452.8633 L798,462.8633 L808,462.8633 L798,452.8633 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="612" y="470.4316">Update of Timesheet Entries.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="612" y="485.7422">Provided with the Timesheet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="612" y="501.0527">ID, raw m-ld update, the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="612" y="516.3633">current Timesheet state</text><path d="M606,534.1055 L606,550.416 L484,514.9736 L606,558.416 L606,574.7266 A0,0 0 0 0 606,574.7266 L809,574.7266 A0,0 0 0 0 809,574.7266 L809,544.1055 L799,534.1055 L606,534.1055 A0,0 0 0 0 606,534.1055 " fill="#FBFB77" filter="url(#f1g90nffrex2cv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M799,534.1055 L799,544.1055 L809,544.1055 L799,534.1055 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="612" y="551.6738">Limited account updates e.g.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="612" y="566.9844">create/delete Timesheet</text><!--MD5=[223ffe069d88f2c2fa0f1d7f30144c51]
link Timesheet$$$LEFT to Timesheet--><!--MD5=[f3ce057685e0ff9797995d99a96fc0ff]
link Account to Timesheet--><path codeLine="21" d="M242.5,112.1 C242.5,112.1 242.5,316.94 242.5,392.29 " fill="none" id="Account-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="242.5,405.71,246.5,396.71,242.5,400.71,238.5,396.71,242.5,405.71" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242.5" x2="242.5" y1="400.71" y2="392.71"/><polygon fill="#A80036" points="242.5,100.1,238.5,106.1,242.5,112.1,246.5,106.1,242.5,100.1" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="236.0594" y="395.2312">*</text><!--MD5=[ec582d29987a1bd7ef00a3777023e8e6]
link IntegrationExtension to IntegrationExtension$$$RIGHT--><!--MD5=[2a94487a5a9f8c190fdcdaa3e3e2a573]
link IntegrationExtension to Timesheet--><path codeLine="45" d="M392.23,250.61 C374.55,271.21 352.89,297.08 334.5,321 C313.32,348.54 290.89,380.42 273.48,405.83 " fill="none" id="IntegrationExtension-Timesheet" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="271.5896" y="395.3688">*</text><!--MD5=[bd1832094884603d1f28a25bdf66abe3]
link Account to IntegrationExtension--><path codeLine="47" d="M305.8896,107.8988 C305.8896,107.8988 350.01,145.07 369.97,161.88 " fill="none" id="Account-IntegrationExtension" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="380.14,170.45,375.8316,161.5935,376.3152,167.2297,370.679,167.7133,380.14,170.45" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="376.3152" x2="370.2" y1="167.2297" y2="162.07"/><polygon fill="#A80036" points="296.71,100.17,298.7235,107.0943,305.8896,107.8988,303.8761,100.9745,296.71,100.17" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="365.6563" y="159.8573">*</text><!--MD5=[835f5fc12f54b3c88b17ac4337f133df]
link Integration to Integration$$$RIGHT--><!--MD5=[84419ab8a7f34e713c8c5c5466e69c3d]
link IntegrationExtension to Integration--><path codeLine="82" d="M432.2,250.68 C437.3,285.68 444.89,337.85 451.07,380.3 " fill="none" id="IntegrationExtension-Integration" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="345.8897" y="369.6163">implementation</text><!--MD5=[e6614e08f10013e0f9614150e0eac664]
@startuml
'https://plantuml.com/class-diagram

hide circle
allowmixing

abstract class Account <<subject>> {
  timesheet : Timesheet [*]
  project : Project [*]
  integration : IntegrationExtension [*]
}

class Timesheet <<domain>> <<subject>> {
  project : Project [*]
  external : Reference [0..1]
}
note left of Timesheet::external
  The original
  system of record
end note

Account *- -> "*" Timesheet

class IntegrationExtension <<subject>> {
  module : string
  appliesTo : Timesheet | Project [*]
}
note top of IntegrationExtension
  Represents another system
  whose language we speak,
  for the limited purpose
  of pushing //updates// and
  responding //snapshots//
end note

note right of IntegrationExtension::module
  NodeJS ESM import of
  Integration class
end note

note right of IntegrationExtension::appliesTo
  Selection of account-
  owned data
end note

IntegrationExtension - - "*" Timesheet

Account *- -> "*" IntegrationExtension

abstract class Integration <<javascript>> {
  {static} configKey : string
  {static} contentType : string
  constructor(config, ext)
  syncTimesheet(tsId, state): Observable
  entryUpdate(tsId, update, state)
  reportTimesheet(tsId, state) : Stream
  accountUpdate(update)
}
note right of Integration::constructor
  passed configuration (inc. secrets)
  and extension, can have properties
  storing additional data
end note

note right of Integration::syncTimesheet
  Establish sync, e.g. initial
  import or export; then provide
  ongoing updates
end note

note right of Integration::entryUpdate
  Update of Timesheet Entries.
  Provided with the Timesheet
  ID, raw m-ld update, the
  current Timesheet state
end note

note right of Integration::accountUpdate
  Limited account updates e.g.
  create/delete Timesheet
end note

IntegrationExtension - - "implementation" Integration

@enduml

@startuml

hide circle
allowmixing

abstract class Account <<subject>> {
  timesheet : Timesheet [*]
  project : Project [*]
  integration : IntegrationExtension [*]
}

class Timesheet <<domain>> <<subject>> {
  project : Project [*]
  external : Reference [0..1]
}
note left of Timesheet::external
  The original
  system of record
end note

Account *- -> "*" Timesheet

class IntegrationExtension <<subject>> {
  module : string
  appliesTo : Timesheet | Project [*]
}
note top of IntegrationExtension
  Represents another system
  whose language we speak,
  for the limited purpose
  of pushing //updates// and
  responding //snapshots//
end note

note right of IntegrationExtension::module
  NodeJS ESM import of
  Integration class
end note

note right of IntegrationExtension::appliesTo
  Selection of account-
  owned data
end note

IntegrationExtension - - "*" Timesheet

Account *- -> "*" IntegrationExtension

abstract class Integration <<javascript>> {
  {static} configKey : string
  {static} contentType : string
  constructor(config, ext)
  syncTimesheet(tsId, state): Observable
  entryUpdate(tsId, update, state)
  reportTimesheet(tsId, state) : Stream
  accountUpdate(update)
}
note right of Integration::constructor
  passed configuration (inc. secrets)
  and extension, can have properties
  storing additional data
end note

note right of Integration::syncTimesheet
  Establish sync, e.g. initial
  import or export; then provide
  ongoing updates
end note

note right of Integration::entryUpdate
  Update of Timesheet Entries.
  Provided with the Timesheet
  ID, raw m-ld update, the
  current Timesheet state
end note

note right of Integration::accountUpdate
  Limited account updates e.g.
  create/delete Timesheet
end note

IntegrationExtension - - "implementation" Integration

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>